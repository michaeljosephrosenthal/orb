/**
 * orb v1.0.9, Pivot table javascript library.
 *
 * Copyright (c) 2014-2015 Najmeddine Nouri <devnajm@gmail.com>.
 *
 * @version v1.0.9
 * @link http://orbjs.net/
 * @license MIT
 */

"use strict";!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.orb=e()}}(function(){return function e(t,n,o){function a(i,l){if(!n[i]){if(!t[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(r)return r(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){var n=t[i][1][e];return a(n?n:e)},u,u.exports,e,t,n,o)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<o.length;i++)a(o[i]);return a}({1:[function(e,t){t.exports.utils=e("./orb.utils"),t.exports.pgrid=e("./orb.pgrid"),t.exports.pgridwidget=e("./orb.ui.pgridwidget"),t.exports.query=e("./orb.query"),t.exports["export"]=e("./orb.export.excel")},{"./orb.export.excel":6,"./orb.pgrid":8,"./orb.query":9,"./orb.ui.pgridwidget":15,"./orb.utils":17}],2:[function(e,t){function n(e,t,n,a){var r=0,i=0,l=("all"===t?n:t).length;return l>0&&(a||l>1?(o(e,t,n,function(e){i+=e}),i/=l,o(e,t,n,function(e){r+=(e-i)*(e-i)}),r/=a?l:l-1):r=0/0),r}function o(e,t,n,o){var a="all"===t;if(t=a?n:t,t.length>0)for(var r=0;r<t.length;r++)o((a?t[r]:n[t[r]])[e])}var a=t.exports={toAggregateFunc:function(e){return e?"string"==typeof e&&a[e]?a[e]:"function"==typeof e?e:a.sum:a.sum},count:function(e,t,n){return"all"===t?n.length:t.length},sum:function(e,t,n){var a=0;return o(e,t,n,function(e){a+=e}),a},min:function(e,t,n){var a=null;return o(e,t,n,function(e){(null==a||a>e)&&(a=e)}),a},max:function(e,t,n){var a=null;return o(e,t,n,function(e){(null==a||e>a)&&(a=e)}),a},avg:function(e,t,n){var a=0,r=("all"===t?n:t).length;return r>0&&(o(e,t,n,function(e){a+=e}),a/=r),a},prod:function(e,t,n){var a,r=("all"===t?n:t).length;return r>0&&(a=1,o(e,t,n,function(e){a*=e})),a},stdev:function(e,t,o){return Math.sqrt(n(e,t,o,!1))},stdevp:function(e,t,o){return Math.sqrt(n(e,t,o,!0))},"var":function(e,t,o){return n(e,t,o,!1)},varp:function(e,t,o){return n(e,t,o,!0)}}},{}],3:[function(e,t){var n=e("./orb.utils"),o=e("./orb.dimension"),a={COLUMNS:1,ROWS:2,DATA:3};t.exports=function(e,t){function r(e){for(var t=0;t<l.fields.length;t++)if(l.fields[t].name===e.name)return t;return-1}function i(){if(null!=l.pgrid.filteredDataSource&&l.dimensionsCount>0){var e=l.pgrid.filteredDataSource;if(null!=e&&n.isArray(e)&&e.length>0)for(var t=0,a=e.length;a>t;t++)for(var r=e[t],i=l.root,c=0;c<l.dimensionsCount;c++){var u=l.dimensionsCount-c,d=l.fields[c],p=r[d.name],h=i.subdimvals;void 0!==h[p]?i=h[p]:(i.values.push(p),i=new o(++s,i,p,d,u,!1,c==l.dimensionsCount-1),h[p]=i,i.rowIndexes=[],l.dimensionsByDepth[u].push(i)),i.rowIndexes.push(t)}}}var l=this,s=0;null!=e&&null!=e.config&&(this.pgrid=e,this.type=t,this.fields=function(){switch(t){case a.COLUMNS:return l.pgrid.config.columnFields;case a.ROWS:return l.pgrid.config.rowFields;case a.DATA:return l.pgrid.config.dataFields;default:return[]}}(),this.dimensionsCount=null,this.root=null,this.dimensionsByDepth=null,this.update=function(){l.dimensionsCount=l.fields.length,l.root=new o(++s,null,null,null,l.dimensionsCount+1,!0),l.dimensionsByDepth={};for(var e=1;e<=l.dimensionsCount;e++)l.dimensionsByDepth[e]=[];i();for(var t=0;t<l.fields.length;t++){var n=l.fields[t];("asc"===n.sort.order||"desc"===n.sort.order)&&l.sort(n,!0)}},this.sort=function(e,t){if(null!=e){t!==!0&&(e.sort.order="asc"!==e.sort.order?"asc":"desc");for(var n=l.dimensionsCount-r(e),o=n===l.dimensionsCount?[l.root]:l.dimensionsByDepth[n+1],a=0;a<o.length;a++)o[a].values.sort(),"desc"===e.sort.order&&o[a].values.reverse()}})},t.exports.Type=a},{"./orb.dimension":5,"./orb.utils":17}],4:[function(e,t){function n(e,t,n){for(var o=0;o<t.length;o++)if(null!=t[o][e])return t[o][e];return n}function o(){for(var e={configs:[],sorts:[],subtotals:[],functions:[]},t=0;t<arguments.length;t++){var n=arguments[t]||{};e.configs.push(n),e.sorts.push(n.sort||{}),e.subtotals.push(n.subTotal||{}),e.functions.push({aggregateFuncName:n.aggregateFuncName,aggregateFunc:0===t?n.aggregateFunc:n.aggregateFunc?n.aggregateFunc():null,formatFunc:0===t?n.formatFunc:n.formatFunc?n.formatFunc():null})}return e}function a(e,t,a,r){var i,l;if(r)switch(t){case c.Type.ROWS:i=e.rowSettings,l=r.rowSettings;break;case c.Type.COLUMNS:i=e.columnSettings,l=r.columnSettings;break;case c.Type.DATA:i=e.dataSettings,l=r.dataSettings;break;default:i=null,l=null}else i=null,l=null;var s=o(a,l,i,r,e);return new h({name:n("name",s.configs,""),caption:n("caption",s.configs,""),sort:{order:n("order",s.sorts,null),customfunc:n("customfunc",s.sorts,null)},subTotal:{visible:n("visible",s.subtotals,!0),collapsible:n("collapsible",s.subtotals,!0),collapsed:n("collapsed",s.subtotals,!1)&&n("collapsible",s.subtotals,!0)},aggregateFuncName:n("aggregateFuncName",s.functions,"sum"),aggregateFunc:n("aggregateFunc",s.functions,u.sum),formatFunc:n("formatFunc",s.functions,null)},!1)}function r(e){e=e||{},this.rowsvisible=void 0!==e.rowsvisible?e.rowsvisible:!0,this.columnsvisible=void 0!==e.columnsvisible?e.columnsvisible:!0}function i(e,t){var n={visible:t===!0?!0:void 0,collapsible:t===!0?!0:void 0,collapsed:t===!0?!1:void 0};e=e||{},this.visible=void 0!==e.visible?e.visible:n.visible,this.collapsible=void 0!==e.collapsible?e.collapsible:n.collapsible,this.collapsed=void 0!==e.collapsed?e.collapsed:n.collapsed}function l(e){e=e||{},this.order=e.order,this.customfunc=e.customfunc}var s=e("./orb.utils"),c=e("./orb.axe"),u=e("./orb.aggregation"),d=e("./orb.filtering"),p=e("./orb.themes"),h=t.exports.field=function(e,t){function n(e){return null!=e?e.toString():""}e=e||{},this.name=e.name,this.caption=e.caption||this.name,this.sort=new l(e.sort),this.subTotal=new i(e.subTotal);var o,a;this.aggregateFunc=function(e){return e?void(o=u.toAggregateFunc(e)):o},this.formatFunc=function(e){return e?void(a=e):a},this.aggregateFuncName=e.aggregateFuncName||(e.aggregateFunc?s.isString(e.aggregateFunc)?e.aggregateFunc:"custom":null),this.aggregateFunc(e.aggregateFunc),this.formatFunc(e.formatFunc||n),t!==!1&&((this.rowSettings=new h(e.rowSettings,!1)).name=this.name,(this.columnSettings=new h(e.columnSettings,!1)).name=this.name,(this.dataSettings=new h(e.dataSettings,!1)).name=this.name)};t.exports.config=function(e){function t(e){return"string"==typeof e?{name:l.captionToName(e)}:e}function n(e,t){var n=o(e,t);return n>-1?e[n]:null}function o(e,t){for(var n=0;n<e.length;n++)if(e[n].name===t)return n;return-1}var l=this;this.dataSource=e.dataSource||[],this.canMoveFields=void 0!==e.canMoveFields?!!e.canMoveFields:!0,this.dataHeadersLocation="columns"===e.dataHeadersLocation?"columns":"rows",this.grandTotal=new r(e.grandTotal),this.subTotal=new i(e.subTotal,!0),this.width=e.width,this.height=e.height,this.toolbar=e.toolbar,this.theme=p,p.current(e.theme),this.rowSettings=new h(e.rowSettings,!1),this.columnSettings=new h(e.columnSettings,!1),this.dataSettings=new h(e.dataSettings,!1),this.dataSourceFieldNames=[],this.dataSourceFieldCaptions=[],this.captionToName=function(e){var t=l.dataSourceFieldCaptions.indexOf(e);return t>=0?l.dataSourceFieldNames[t]:e},this.nameToCaption=function(e){var t=l.dataSourceFieldNames.indexOf(e);return t>=0?l.dataSourceFieldCaptions[t]:e},this.setTheme=function(e){return l.theme.current()!==l.theme.current(e)},this.allFields=(e.fields||[]).map(function(e){var t=new h(e);return l.dataSourceFieldNames.push(t.name),l.dataSourceFieldCaptions.push(t.caption),t}),this.rowFields=(e.rows||[]).map(function(e){return e=t(e),a(l,c.Type.ROWS,e,n(l.allFields,e.name))}),this.columnFields=(e.columns||[]).map(function(e){return e=t(e),a(l,c.Type.COLUMNS,e,n(l.allFields,e.name))}),this.dataFields=(e.data||[]).map(function(e){return e=t(e),a(l,c.Type.DATA,e,n(l.allFields,e.name))}),this.dataFieldsCount=this.dataFields?this.dataFields.length||1:1;var u={subtotals:{rows:void 0!==l.rowSettings.subTotal.visible?l.rowSettings.subTotal.visible:!0,columns:void 0!==l.columnSettings.subTotal.visible?l.columnSettings.subTotal.visible:!0}};this.getField=function(e){return n(l.allFields,e)},this.getRowField=function(e){return n(l.rowFields,e)},this.getColumnField=function(e){return n(l.columnFields,e)},this.getDataField=function(e){return n(l.dataFields,e)},this.availablefields=function(){return l.allFields.filter(function(e){var t=function(t){return e.name!==t.name};return l.dataFields.every(t)&&l.rowFields.every(t)&&l.columnFields.every(t)})},this.getDataSourceFieldCaptions=function(){var e;if(l.dataSource&&(e=l.dataSource[0])){for(var t=s.ownProperties(e),n=[],o=0;o<t.length;o++)n.push(l.nameToCaption(t[o]));return n}return null},this.getPreFilters=function(){var t={};return e.preFilters&&s.ownProperties(e.preFilters).forEach(function(n){var o=e.preFilters[n];if(s.isArray(o))t[l.captionToName(n)]=new d.expressionFilter(null,null,o,!1);else{var a=s.ownProperties(o)[0];a&&(t[l.captionToName(n)]=new d.expressionFilter(a,o[a]))}}),t},this.moveField=function(e,t,r,i){var s,u,d,p,h=n(l.allFields,e);if(h){switch(t){case c.Type.ROWS:s=l.rowFields;break;case c.Type.COLUMNS:s=l.columnFields;break;case c.Type.DATA:s=l.dataFields}switch(r){case c.Type.ROWS:d=l.rowFields,p=l.getRowField(e);break;case c.Type.COLUMNS:d=l.columnFields,p=l.getColumnField(e);break;case c.Type.DATA:d=l.dataFields,p=l.getDataField(e)}if(s||d){var f=l.areSubtotalsVisible(r);if(s){if(u=o(s,e),t===r&&(u==s.length-1&&null==i||u===i-1))return!1;s.splice(u,1)}var g=a(l,r,p,h);return f||g.subTotal.visible===!1||(g.subTotal.visible=null),d&&(null!=i?d.splice(i,0,g):d.push(g)),l.dataFieldsCount=l.dataFields?l.dataFields.length||1:1,!0}}},this.toggleSubtotals=function(e){var t,n,o=!l.areSubtotalsVisible(e);if(e===c.Type.ROWS)u.subtotals.rows=o,n=l.rowFields;else{if(e!==c.Type.COLUMNS)return!1;u.subtotals.columns=o,n=l.columnFields}for(o=o===!1?null:!0,t=0;t<n.length;t++)n[t].subTotal.visible!==!1&&(n[t].subTotal.visible=o);return!0},this.areSubtotalsVisible=function(e){return e===c.Type.ROWS?u.subtotals.rows:e===c.Type.COLUMNS?u.subtotals.columns:null},this.toggleGrandtotal=function(e){var t=!l.isGrandtotalVisible(e);if(e===c.Type.ROWS)l.grandTotal.rowsvisible=t;else{if(e!==c.Type.COLUMNS)return!1;l.grandTotal.columnsvisible=t}return!0},this.isGrandtotalVisible=function(e){return e===c.Type.ROWS?l.grandTotal.rowsvisible:e===c.Type.COLUMNS?l.grandTotal.columnsvisible:!1}}},{"./orb.aggregation":2,"./orb.axe":3,"./orb.filtering":7,"./orb.themes":11,"./orb.utils":17}],5:[function(e,t){t.exports=function(e,t,n,o,a,r,i){var l=this;this.id=e,this.parent=t,this.value=n,this.isRoot=r,this.isLeaf=i,this.field=o,this.depth=a,this.values=[],this.subdimvals={},this.rowIndexes=null,this.getRowIndexes=function(e){if(null==l.rowIndexes){l.rowIndexes=[];for(var t=0;t<l.values.length;t++)l.subdimvals[l.values[t]].getRowIndexes(l.rowIndexes)}if(null!=e){for(var n=0;n<l.rowIndexes.length;n++)e.push(l.rowIndexes[n]);return e}return l.rowIndexes}}},{}],6:[function(e,t){var n=e("./orb.utils"),o=e("./orb.ui.header"),a=e("./orb.themes"),r="data:application/vnd.ms-excel;base64,",i='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta http-equiv=Content-Type content="text/html; charset=UTF-8"><!--[if gte mso 9]><xml> <x:ExcelWorkbook>  <x:ExcelWorksheets>   <x:ExcelWorksheet>    <x:Name>###sheetname###</x:Name>    <x:WorksheetOptions>     <x:ProtectContents>False</x:ProtectContents>     <x:ProtectObjects>False</x:ProtectObjects>     <x:ProtectScenarios>False</x:ProtectScenarios>    </x:WorksheetOptions>   </x:ExcelWorksheet>  </x:ExcelWorksheets>  <x:ProtectStructure>False</x:ProtectStructure>  <x:ProtectWindows>False</x:ProtectWindows> </x:ExcelWorkbook></xml><![endif]--></head><body>',l="</body></html>";t.exports=function(e){function t(e){return"<td "+m+'><font color="'+h+'">'+e+"</font></td>"}function s(e,n,o,a){var r,i=a||"<tr>";for(r=0;n>r;r++)i+="<td></td>";for(i+=e.reduce(function(e,n){return e+=t(n.caption)},""),r=0;o>r;r++)i+="<td></td>";return i+"</tr>"}function c(e){return n.btoa(unescape(encodeURIComponent(e)))}var u=e.pgrid.config,d=a.current();d="bootstrap"===d?"white":d;var p="white"===d,h=p?"black":"white",f=a.themes[d],g=a.utils.fadeoutColor(f,.1),m='style="font-weight: bold; color: '+h+"; background-color: "+f+';" bgcolor="'+f+'"',v='style="background-color: '+g+';" bgcolor="'+g+'"',b=Math.max(u.dataFields.length+1,e.layout.pivotTable.width),y=s(u.dataFields,0,b-u.dataFields.length,'<tr><td><font color="#ccc">Data</font></td>'),x='<tr><td style="height: 22px;" colspan="'+b+'"></td></tr>',C=s(u.columnFields,e.layout.rowHeaders.width,b-(e.layout.rowHeaders.width+u.columnFields.length)),w=function(){for(var n,a="",r=0;r<e.columns.headers.length;r++){var i=e.columns.headers[r],l="<tr>";if(r<e.columns.headers.length-1)for(n=0;n<e.layout.rowHeaders.width;n++)l+="<td></td>";else l+=u.rowFields.reduce(function(e,n){return e+=t(n.caption)},"");l+=i.reduce(function(e,t){var n=t.type===o.HeaderType.DATA_HEADER?t.value.caption:t.value;return e+="<td "+v+' colspan="'+t.hspan(!0)+'" rowspan="'+t.vspan(!0)+'">'+n+"</td>"},""),a+=l+"</tr>"}return a}(),T=function(){for(var t="",n=0;n<e.rows.headers.length;n++){var o=e.rows.headers[n],a="<tr>";a+=o.reduce(function(e,t){return e+="<td "+v+' colspan="'+t.hspan(!0)+'" rowspan="'+t.vspan(!0)+'">'+t.value+"</td>"},"");var r=e.dataRows[n];a+=r.reduce(function(e,t,n){var o=u.dataFields[n%=u.dataFields.length].formatFunc,a=null==t.value?"":o?o()(t.value):t.value;return e+="<td>"+a+"</td>"},""),t+=a+"</tr>"}return t}();return r+c(i+"<table>"+y+x+C+w+T+"</table>"+l)}},{"./orb.themes":11,"./orb.ui.header":14,"./orb.utils":17}],7:[function(e,t){var n=e("./orb.utils"),o=t.exports={ALL:"#All#",NONE:"#None#",BLANK:'#Blank#"'};o.expressionFilter=function(e,t,r,i){var l=this;this.operator=a.get(e),this.regexpMode=!1,this.term=t||null,this.term&&this.operator&&this.operator.regexpSupported&&n.isRegExp(this.term)&&(this.regexpMode=!0,this.term.ignoreCase||(this.term=new RegExp(this.term.source,"i"))),this.staticValue=r,this.excludeStatic=i,this.test=function(e){if(n.isArray(l.staticValue)){var t=l.staticValue.indexOf(e)>=0;return l.excludeStatic&&!t||!l.excludeStatic&&t}return l.term?l.operator.func(e,l.term):l.staticValue===!0||l.staticValue===o.ALL?!0:l.staticValue===!1||l.staticValue===o.NONE?!1:!0},this.isAlwaysTrue=function(){return!(l.term||n.isArray(l.staticValue)||l.staticValue===o.NONE||l.staticValue===!1)}};var a=o.Operators={get:function(e){switch(e){case a.MATCH.name:return a.MATCH;case a.NOTMATCH.name:return a.NOTMATCH;case a.EQ.name:return a.EQ;case a.NEQ.name:return a.NEQ;case a.GT.name:return a.GT;case a.GTE.name:return a.GTE;case a.LT.name:return a.LT;case a.LTE.name:return a.LTE;default:return a.NONE}},NONE:null,MATCH:{name:"Matches",func:function(e,t){return e?e.toString().search(n.isRegExp(t)?t:new RegExp(t,"i"))>=0:!t},regexpSupported:!0},NOTMATCH:{name:"Does Not Match",func:function(e,t){return e?e.toString().search(n.isRegExp(t)?t:new RegExp(t,"i"))<0:!!t},regexpSupported:!0},EQ:{name:"=",func:function(e,t){return e==t},regexpSupported:!1},NEQ:{name:"<>",func:function(e,t){return e!=t},regexpSupported:!1},GT:{name:">",func:function(e,t){return e>t},regexpSupported:!1},GTE:{name:">=",func:function(e,t){return e>=t},regexpSupported:!1},LT:{name:"<",func:function(e,t){return t>e},regexpSupported:!1},LTE:{name:"<=",func:function(e,t){return t>=e},regexpSupported:!1}}},{"./orb.utils":17}],8:[function(e,t){var n=e("./orb.axe"),o=e("./orb.config").config,a=e("./orb.filtering"),r=e("./orb.query"),i=e("./orb.utils");t.exports=function(e){function t(e){e!==!1&&l(),h.rows.update(),h.columns.update(),u()}function l(){var e=i.ownProperties(h.filters);if(e.length>0){h.filteredDataSource=[];for(var t=0;t<h.config.dataSource.length;t++){for(var n=h.config.dataSource[t],o=!1,a=0;a<e.length;a++){var r=e[a],l=h.filters[r];if(l&&!l.test(n[r])){o=!0;break}}o||h.filteredDataSource.push(n)}}else h.filteredDataSource=h.config.dataSource}function s(e,t,n,o,a){var r={};if(h.config.dataFieldsCount>0){var i;if(null==e)i=t;else if(null==t)i=e;else{i=[];for(var l=0;l<e.length;l++){var s=e[l];if(s>=0){var c=t.indexOf(s);c>=0&&(e[l]=0-(s+2),i.push(s))}}}var u,d=i&&0===i.length,f=(h.filteredDataSource,[]);if(o)for(var g=0;g<o.length;g++)u=h.config.getDataField(o[g]),a||(u?a=u.aggregateFunc():(u=h.config.getField(o[g]),u&&(a=u.dataSettings?u.dataSettings.aggregateFunc():u.aggregateFunc()))),u&&a&&f.push({field:u,aggregateFunc:a});else for(var m=0;m<h.config.dataFieldsCount;m++)u=h.config.dataFields[m]||p,(a||u.aggregateFunc)&&f.push({field:u,aggregateFunc:a||u.aggregateFunc()});for(var v=0;v<f.length;v++)u=f[v],r[u.field.name]=d?null:u.aggregateFunc(u.field.name,i||"all",h.filteredDataSource,n||e,t)}return r}function c(e){if(e){var t={},n="r"+e.id;if(void 0===d[n]&&(d[n]=e.isRoot?null:d[e.parent.id]||e.getRowIndexes()),t[h.columns.root.id]=s(e.isRoot?null:d[n].slice(0),null),h.columns.dimensionsCount>0)for(var o=0,a=[h.columns.root];o<a.length;){for(var r=a[o],i=e.isRoot?null:r.isRoot?d[n].slice(0):d["c"+r.id].slice(0),l=0;l<r.values.length;l++){var c=r.subdimvals[r.values[l]],u="c"+c.id;if(void 0===d[u]&&(d[u]=d[u]||c.getRowIndexes().slice(0)),t[c.id]=s(i,d[u],e.isRoot?null:e.getRowIndexes()),!c.isLeaf&&(a.push(c),i)){d[u]=[];for(var p=0;p<i.length;p++){var f=i[p];-1!=f&&0>f&&(d[u].push(0-(f+2)),i[p]=-1)}}}d["c"+r.id]=void 0,o++}return t}}function u(){if(h.dataMatrix={},d={},h.dataMatrix[h.rows.root.id]=c(h.rows.root),h.rows.dimensionsCount>0)for(var e,t=[h.rows.root],n=0;n<t.length;){e=t[n];for(var o=0;o<e.values.length;o++){var a=e.subdimvals[e.values[o]];h.dataMatrix[a.id]=c(a),a.isLeaf||t.push(a)}n++}}var d,p={name:"#undefined#"},h=this;this.config=new o(e),this.filters=h.config.getPreFilters(),this.filteredDataSource=h.config.dataSource,this.rows=new n(h,n.Type.ROWS),this.columns=new n(h,n.Type.COLUMNS),this.dataMatrix={},this.moveField=function(e,n,o,a){return h.config.moveField(e,n,o,a)?(t(!1),!0):!1},this.applyFilter=function(e,n,o,r,i){h.filters[e]=new a.expressionFilter(n,o,r,i),t()},this.refreshData=function(e){h.config.dataSource=e,t()},this.getFieldValues=function(e,t){for(var n=[],o=[],a=!1,r=0;r<h.config.dataSource.length;r++){var l=h.config.dataSource[r],s=l[e];void 0!==t?(t===!0||"function"==typeof t&&t(s))&&n.push(s):s?n.push(s):a=!0}if(n.length>1){i.isNumber(n[0])||i.isDate(n[0])?n.sort(function(e,t){return e?t?e-t:1:t?-1:0}):n.sort();for(var c=0;c<n.length;c++)(0===c||n[c]!==o[o.length-1])&&o.push(n[c])}else o=n;return o.containsBlank=a,o},this.getFieldFilter=function(e){return h.filters[e]},this.isFieldFiltered=function(e){var t=h.getFieldFilter(e);return null!=t&&!t.isAlwaysTrue()},this.getData=function(e,t,n,o){var a;if(t&&n){var r=e||(h.config.dataFields[0]||p).name,i=h.config.getDataField(r);a=!i||o&&i.aggregateFunc!=o?h.calcAggregation(t.isRoot?null:t.getRowIndexes().slice(0),n.isRoot?null:n.getRowIndexes().slice(0),[r],o)[r]:h.dataMatrix[t.id]&&h.dataMatrix[t.id][n.id]?h.dataMatrix[t.id][n.id][r]:null}return void 0===a?null:a},this.calcAggregation=function(e,t,n,o){return s(e,t,e,n,o)},this.query=r(h),t()}},{"./orb.axe":3,"./orb.config":4,"./orb.filtering":7,"./orb.query":9,"./orb.utils":17}],9:[function(e,t){var n=e("./orb.utils"),o=e("./orb.axe"),a=e("./orb.aggregation"),r=function(e,t,o){var r=this;this.source=e,this.query=t,this.filters=o,this.extractResult=function(e,t,n){if(n.multi===!0){for(var o={},a=0;a<t.multiFieldNames.length;a++)o[t.multiFieldNames[a]]=e[r.getCaptionName(t.multiFieldNames[a])];return o}return e[n.datafieldname]},this.measureFunc=function(e,t,n,o){var a={datafieldname:r.getCaptionName(e),multi:t,aggregateFunc:n};return function(e){e=r.cleanOptions(e,arguments,a);var n=r.compute(e,o,t);return r.extractResult(n,e,a)}},this.setDefaultAggFunctions=function(e){var t=r.query.val?"val_":"val";r.query[t]=r.measureFunc(void 0,!0,void 0,e);for(var o=n.ownProperties(a),i=0;i<o.length;i++){var l=o[i];"toAggregateFunc"!==l&&(r.query[l]=r.measureFunc(void 0,!0,a[l],e))}}},i=function(e){function t(e,t){return function(n){return n.value===t.val&&(!e||e.some(function(e){var t=n.parent;if(t)for(;t.depth<e.depth;)t=t.parent;return t===e}))}}r.call(this,e,{},{});var n=this;this.getCaptionName=function(e){return n.source.config.captionToName(e)},this.cleanOptions=function(e,t,o){var r={fieldNames:[]};if(o.multi===!0){e&&"object"==typeof e?(r.aggregateFunc=e.aggregateFunc,r.multiFieldNames=e.fields):(r.aggregateFunc=o.aggregateFunc,r.multiFieldNames=t);for(var i=0;i<r.multiFieldNames.length;i++)r.fieldNames.push(n.getCaptionName(r.multiFieldNames[i]))}else r.aggregateFunc=e,r.fieldNames.push(o.datafieldname);return r.aggregateFunc&&(r.aggregateFunc=a.toAggregateFunc(r.aggregateFunc)),r},this.setup=function(e){var t,a=n.source.config.rowFields,r=n.source.config.columnFields,i=n.source.config.dataFields;for(t=0;t<a.length;t++)n.slice(a[t],o.Type.ROWS,a.length-t);for(t=0;t<r.length;t++)n.slice(r[t],o.Type.COLUMNS,r.length-t);for(t=0;t<i.length;t++){var l=i[t],s=l.name,c=l.caption||s;n.query[s]=n.query[c]=n.measureFunc(s)}if(e)for(var u in e)e.hasOwnProperty(u)&&n.query[u](e[u]);return n.setDefaultAggFunctions(),n.query},this.slice=function(e,t,o){n.query[e.name]=n.query[e.caption||e.name]=function(a){var r={name:e.name,val:a,depth:o};return(n.filters[t]=n.filters[t]||[]).push(r),n.query}},this.applyFilters=function(e){if(n.filters[e]){for(var a=n.filters[e].sort(function(e,t){return t.depth-e.depth}),r=n.source[e===o.Type.ROWS?"rows":"columns"],i=0,l=null;i<a.length;){var s=a[i];l=r.dimensionsByDepth[s.depth].filter(t(l,s)),i++}return l}return null},this.compute=function(e){var t,a=n.applyFilters(o.Type.ROWS)||[n.source.rows.root],r=n.applyFilters(o.Type.COLUMNS)||[n.source.columns.root];if(1===a.length&&1===r.length){t={};for(var i=0;i<e.fieldNames.length;i++)t[e.fieldNames[i]]=n.source.getData(e.fieldNames[i],a[0],r[0],e.aggregateFunc)}else{for(var l=[],s=[],c=0;c<a.length;c++)l=l.concat(a[c].getRowIndexes());for(var u=0;u<r.length;u++)s=s.concat(r[u].getRowIndexes());t=n.source.calcAggregation(l,s,e.fieldNames,e.aggregateFunc)}return t}},l=function(e){r.call(this,e,{},[]);var t=this,o={};this.setCaptionName=function(e,t){o[e||t]=t},this.getCaptionName=function(e){return o[e]||e},this.cleanOptions=function(e,n,o){var a={fieldNames:[]};if(o.multi===!0){e&&"object"==typeof e?(a.aggregateFunc=e.aggregateFunc,a.multiFieldNames=e.fields):(a.aggregateFunc=o.aggregateFunc,a.multiFieldNames=n);for(var r=0;r<a.multiFieldNames.length;r++)a.fieldNames.push(t.getCaptionName(a.multiFieldNames[r]))}else a.aggregateFunc=e||o.aggregateFunc,a.fieldNames.push(o.datafieldname);return a},this.setup=function(e){if(t.query.slice=function(e,n){var o={name:e,val:n};return t.filters.push(o),t.query},e)for(var o=n.ownProperties(e),a=0;a<o.length;a++){var r=o[a],i=e[r],l=i.caption||i.name;i.name=r,t.setCaptionName(l,r),i.toAggregate?t.query[r]=t.query[l]=t.measureFunc(r,!1,i.aggregateFunc):t.slice(i)}return t.setDefaultAggFunctions(e),t.query},this.slice=function(e){t.query[e.name]=t.query[e.caption||e.name]=function(n){return t.query.slice(e.name,n)}},this.applyFilters=function(){for(var e=[],n=0;n<t.source.length;n++){for(var o=t.source[n],a=!0,r=0;r<t.filters.length;r++){var i=t.filters[r];if(o[i.name]!==i.val){a=!1;break}}a&&e.push(n)}return e},this.compute=function(e,n,o){for(var r=t.applyFilters(),i={},l=0;l<e.fieldNames.length;l++){var s=e.fieldNames[l],c=a.toAggregateFunc(o===!0?e.aggregateFunc||(n&&n[s]?n[s].aggregateFunc:void 0):e.aggregateFunc);i[s]=c(s,r||"all",t.source,r,null)}return i}};t.exports=function(e,t){return n.isArray(e)?new l(e).setup(t):function(t){return new i(e).setup(t)}}},{"./orb.aggregation":2,"./orb.axe":3,"./orb.utils":17}],10:[function(e,t){t.exports=function(){var e={};this.set=function(t,n){e[t]=n},this.get=function(t){return e[t]}}},{}],11:[function(e,t){t.exports=function(){function e(){return"bootstrap"===t}var t="blue",n={};n.themes={red:"#C72C48",blue:"#5bc0de",green:"#3fb618",orange:"#df691a",flower:"#A74AC7",gray:"#808080",black:"#000000",white:"#FFFFFF"},n.current=function(e){return e&&(t=n.validateTheme(e)),t},n.validateTheme=function(e){return e=(e||"").toString().trim(),n.themes[e]||"bootstrap"===e?e:"blue"},n.getPivotClasses=function(){return{container:"orb-container orb-"+t,table:"orb"+(e()?" table":"")}},n.getButtonClasses=function(){return{pivotButton:"fld-btn"+(e()?" btn btn-default btn-xs":""),orbButton:"orb-btn"+(e()?" btn btn-default btn-xs":""),scrollBar:e()?" btn btn-default btn-xs":""}},n.getFilterClasses=function(){return{container:"orb-"+t+" orb fltr-cntnr"}},n.getGridClasses=function(){return{table:e()?"table table-condensed":"orb-table"}},n.getDialogClasses=function(n){var o={overlay:"orb-overlay orb-overlay-"+(n?"visible":"hidden")+" orb-"+t,dialog:"orb-dialog",content:"",header:"orb-dialog-header",title:"",body:"orb-dialog-body"};return e()&&(o.overlay+=" modal",o.dialog+=" modal-dialog",o.content="modal-content",o.header+=" modal-header",o.title="modal-title",o.body+=" modal-body"),o};var o=n.utils={hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},rgbaToHex:function(e){var t=e.match(/rgba\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+(?:\.\d+)?)\s*\)/);if(t){var n=parseFloat(t[4]);return"#"+o.applyAlphaAndToHex(t[1],n)+o.applyAlphaAndToHex(t[2],n)+o.applyAlphaAndToHex(t[3],n)}return null},applyAlphaAndToHex:function(e,t){return(Math.floor(t*parseInt(e)+255*(1-t))+256).toString(16).substr(1,2)},fadeoutColor:function(e,t){return e=o.hexToRgb(e),"#"+o.applyAlphaAndToHex(e.r,t)+o.applyAlphaAndToHex(e.g,t)+o.applyAlphaAndToHex(e.b,t)}};return n}()},{}],12:[function(e,t){var n=e("./orb.axe"),o=e("./orb.ui.header");t.exports=function(e){var t=this;this.axe=e,this.headers=[],this.dataFieldsCount=function(){return"columns"===t.axe.pgrid.config.dataHeadersLocation&&t.axe.type===n.Type.COLUMNS||"rows"===t.axe.pgrid.config.dataHeadersLocation&&t.axe.type===n.Type.ROWS?t.axe.pgrid.config.dataFieldsCount:1},this.isMultiDataFields=function(){return t.dataFieldsCount()>1},this.toggleFieldExpansion=function(e,t){for(var n,a=[],r=!0,i=0;i<this.headers.length;i++)for(n=0;n<this.headers[i].length;n++){var l=this.headers[i][n];l.type!==o.HeaderType.SUB_TOTAL||null!=e&&l.dim.field.name!=e.name||(a.push(l),r=r&&l.expanded)}if(void 0!==t&&(r=!t),a.length>0){for(n=0;n<a.length;n++)r?a[n].collapse():a[n].expand();return!0}return!1}}},{"./orb.axe":3,"./orb.ui.header":14}],13:[function(e,t){var n=e("./orb.axe"),o=e("./orb.ui.axe"),a=e("./orb.ui.header");t.exports=function(e){function t(){function e(e){e&&e.dim.field.subTotal.visible&&t.push(e.subtotalHeader)}var t=[];if(i.headers.length>0){var n=i.headers[i.headers.length-1],o=n[0];if(o){for(var r,l=o.parent,s=0;s<n.length;s++){if(o=n[s],r=o.parent,r!=l){if(e(l),null!=r)for(var c=r.parent,u=l?l.parent:null;c!=u&&null!=u;)e(u),c=c?c.parent:null,u=u?u.parent:null;l=r}if(t.push(n[s]),s===n.length-1)for(;null!=l;)e(l),l=l.parent}i.axe.pgrid.config.grandTotal.columnsvisible&&i.axe.dimensionsCount>1&&t.push(i.headers[0][i.headers[0].length-1])}}if(i.isMultiDataFields()){i.leafsHeaders=[];for(var d=0;d<t.length;d++)for(var p=0;p<i.dataFieldsCount();p++)i.leafsHeaders.push(new a.dataHeader(i.axe.pgrid.config.dataFields[p],t[d]));i.headers.push(i.leafsHeaders)}else i.leafsHeaders=t}function r(e,t){for(var o=t[t.length-1],r=i.axe.root.depth===e?[null]:t[i.axe.root.depth-e-1].filter(function(e){return e.type!==a.HeaderType.SUB_TOTAL}),l=0;l<r.length;l++)for(var s=r[l],c=null==s?i.axe.root:s.dim,u=0;u<c.values.length;u++){var d,p=c.values[u],h=c.subdimvals[p];d=!h.isLeaf&&h.field.subTotal.visible?new a.header(n.Type.COLUMNS,a.HeaderType.SUB_TOTAL,h,s,i.dataFieldsCount()):null;var f=new a.header(n.Type.COLUMNS,null,h,s,i.dataFieldsCount(),d);o.push(f),!h.isLeaf&&h.field.subTotal.visible&&o.push(d)}}var i=this;o.call(i,e),this.leafsHeaders=null,this.build=function(){if(i.headers=[],null!=i.axe){if(i.axe.root.values.length>0||i.axe.pgrid.config.grandTotal.columnsvisible){for(var e=i.axe.root.depth;e>1;e--)i.headers.push([]),r(e,i.headers);i.axe.pgrid.config.grandTotal.columnsvisible&&(i.headers[0]=i.headers[0]||[]).push(new a.header(n.Type.COLUMNS,a.HeaderType.GRAND_TOTAL,i.axe.root,null,i.dataFieldsCount()))}0===i.headers.length&&i.headers.push([new a.header(n.Type.COLUMNS,a.HeaderType.INNER,i.axe.root,null,i.dataFieldsCount())]),t()}},this.build()}},{"./orb.axe":3,"./orb.ui.axe":12,"./orb.ui.header":14}],14:[function(e,t){function n(e){this.axetype=e.axetype,this.type=e.type,this.template=e.template,this.value=e.value,this.expanded=!0,this.cssclass=e.cssclass,this.hspan=e.hspan||function(){return 1},this.vspan=e.vspan||function(){return 1},this.visible=e.isvisible||function(){return!0},this.key=this.axetype+this.type+this.value,this.getState=function(){return a.get(this.key)},this.setState=function(e){a.set(this.key,e)}}var o=e("./orb.axe"),a=new(e("./orb.state")),r=t.exports.HeaderType={EMPTY:1,DATA_HEADER:2,DATA_VALUE:3,FIELD_BUTTON:4,INNER:5,WRAPPER:6,SUB_TOTAL:7,GRAND_TOTAL:8,getHeaderClass:function(e,t){var n=t===o.Type.ROWS?"header-row":t===o.Type.COLUMNS?"header-col":"";switch(e){case r.EMPTY:case r.FIELD_BUTTON:n="empty";break;case r.INNER:n="header "+n;break;case r.WRAPPER:n="header "+n;break;case r.SUB_TOTAL:n="header header-st "+n;break;case r.GRAND_TOTAL:n="header header-gt "+n}return n},getCellClass:function(e,t){var n="";switch(e){case r.GRAND_TOTAL:n="cell-gt";break;case r.SUB_TOTAL:n=t===r.GRAND_TOTAL?"cell-gt":"cell-st";break;default:n=t===r.GRAND_TOTAL?"cell-gt":t===r.SUB_TOTAL?"cell-st":""}return n}};t.exports.header=function(e,t,a,i,l,s){function c(){if(f.type===r.SUB_TOTAL){for(var e=f.parent;null!=e;){if(e.subtotalHeader&&!e.subtotalHeader.expanded)return!1;e=e.parent}return!0}var t=f.dim.isRoot||f.dim.isLeaf||!f.dim.field.subTotal.visible||f.subtotalHeader.expanded;if(!t)return!1;for(var n=f.parent;null!=n&&(!n.dim.field.subTotal.visible||null!=n.subtotalHeader&&n.subtotalHeader.expanded);)n=n.parent;return null==n||null==n.subtotalHeader?t:n.subtotalHeader.expanded}function u(e){var t,n=0,o=!1;if(g||e||f.visible()){if(f.dim.isLeaf)return l;if(f.subheaders.length>0)for(var a=0;a<f.subheaders.length;a++){var r=f.subheaders[a];r.dim.isLeaf?n+=l:(t=g?r.vspan():r.hspan(),n+=t,0===a&&0===t&&(o=!0))}else n+=l;return n+(o?1:0)}return n}var d,p,h,f=this,g=e===o.Type.ROWS;switch(t=t||(1===a.depth?r.INNER:r.WRAPPER)){case r.GRAND_TOTAL:h="Grand Total",d=g?a.depth-1||1:l,p=g?l:a.depth-1||1;break;case r.SUB_TOTAL:h=a.value,d=g?a.depth:l,p=g?l:a.depth;break;default:h=a.value,d=g?1:null,p=g?null:1}n.call(this,{axetype:e,type:t,template:g?"cell-template-row-header":"cell-template-column-header",value:h,cssclass:r.getHeaderClass(t,e),hspan:null!=d?function(){return d}:u,vspan:null!=p?function(){return p}:u,isvisible:c}),this.subtotalHeader=s,this.parent=i,this.subheaders=[],this.dim=a,this.expanded=this.getState()?this.getState().expanded:t!==r.SUB_TOTAL||!a.field.subTotal.collapsed,this.expand=function(){f.expanded=!0,this.setState({expanded:f.expanded})},this.collapse=function(){f.expanded=!1,this.setState({expanded:f.expanded})},null!=i&&i.subheaders.push(this)},t.exports.dataHeader=function(e,t){n.call(this,{axetype:null,type:r.DATA_HEADER,template:"cell-template-dataheader",value:e,cssclass:r.getHeaderClass(t.type,t.axetype),isvisible:t.visible}),this.parent=t},t.exports.dataCell=function(e,t,o,a){this.rowDimension=o.type===r.DATA_HEADER?o.parent.dim:o.dim,this.columnDimension=a.type===r.DATA_HEADER?a.parent.dim:a.dim,this.rowType=o.type===r.DATA_HEADER?o.parent.type:o.type,this.colType=a.type===r.DATA_HEADER?a.parent.type:a.type,this.datafield=e.config.dataFieldsCount>1?"rows"===e.config.dataHeadersLocation?o.value:a.value:e.config.dataFields[0],n.call(this,{axetype:null,type:r.DATA_VALUE,template:"cell-template-datavalue",value:e.getData(this.datafield?this.datafield.name:null,this.rowDimension,this.columnDimension),cssclass:"cell "+r.getCellClass(this.rowType,this.colType),isvisible:t})
},t.exports.buttonCell=function(e){n.call(this,{axetype:null,type:r.FIELD_BUTTON,template:"cell-template-fieldbutton",value:e,cssclass:r.getHeaderClass(r.FIELD_BUTTON)})},t.exports.emptyCell=function(e,t){n.call(this,{axetype:null,type:r.EMPTY,template:"cell-template-empty",value:null,cssclass:r.getHeaderClass(r.EMPTY),hspan:function(){return e},vspan:function(){return t}})}},{"./orb.axe":3,"./orb.state":10}],15:[function(e,t){var n=e("./orb.axe"),o=e("./orb.pgrid"),a=e("./orb.ui.header"),r=e("./orb.ui.rows"),i=e("./orb.ui.cols"),l=e("./react/orb.react.compiled");t.exports=function(e){function t(){function e(e,t){return function(){return e()&&t()}}u.rows=new r(u.pgrid.rows),u.columns=new i(u.pgrid.columns);var t=u.rows.headers,n=u.columns.leafsHeaders;u.layout={rowHeaders:{width:(u.pgrid.rows.fields.length||1)+("rows"===u.pgrid.config.dataHeadersLocation&&u.pgrid.config.dataFieldsCount>1?1:0),height:t.length},columnHeaders:{width:u.columns.leafsHeaders.length,height:(u.pgrid.columns.fields.length||1)+("columns"===u.pgrid.config.dataHeadersLocation&&u.pgrid.config.dataFieldsCount>1?1:0)}},u.layout.pivotTable={width:u.layout.rowHeaders.width+u.layout.columnHeaders.width,height:u.layout.rowHeaders.height+u.layout.columnHeaders.height};var o,l=[];if(t.length>0)for(var s=0;s<t.length;s++){var c=t[s],d=c[c.length-1];o=[];for(var p=0;p<n.length;p++){var h=n[p],f=e(d.visible,h.visible);o[p]=new a.dataCell(u.pgrid,f,d,h)}l.push(o)}u.dataRows=l}var s,c,u=this,d=l.Dialog.create();this.pgrid=new o(e),this.rows=null,this.columns=null,this.dataRows=[],this.layout={rowHeaders:{width:null,height:null},columnHeaders:{width:null,height:null},pivotTable:{width:null,height:null}},this.sort=function(e,o){if(e===n.Type.ROWS)u.pgrid.rows.sort(o);else{if(e!==n.Type.COLUMNS)return;u.pgrid.columns.sort(o)}t()},this.refreshData=function(e){u.pgrid.refreshData(e),t(),c.setProps({})},this.applyFilter=function(e,n,o,a,r){u.pgrid.applyFilter(e,n,o,a,r),t()},this.moveField=function(e,n,o,a){return u.pgrid.moveField(e,n,o,a)?(t(),!0):!1},this.toggleFieldExpansion=function(e,t,o){return e===n.Type.ROWS?u.rows.toggleFieldExpansion(t,o):e===n.Type.COLUMNS?u.columns.toggleFieldExpansion(t,o):!1},this.toggleSubtotals=function(e){return u.pgrid.config.toggleSubtotals(e)?(t(),!0):!1},this.areSubtotalsVisible=function(e){return u.pgrid.config.areSubtotalsVisible(e)},this.toggleGrandtotal=function(e){return u.pgrid.config.toggleGrandtotal(e)?(t(),!0):!1},this.isGrandtotalVisible=function(e){return u.pgrid.config.isGrandtotalVisible(e)},this.changeTheme=function(e){c.changeTheme(e)},this.render=function(e){if(s=e){var t=React.createFactory(l.PivotTable),n=t({pgridwidget:u});c=React.render(n,e)}},this.drilldown=function(e){if(e){var t,n=e.columnDimension.getRowIndexes(),o=e.rowDimension.getRowIndexes().filter(function(e){return n.indexOf(e)>=0}).map(function(e){return u.pgrid.filteredDataSource[e]});t=e.rowType===a.HeaderType.GRAND_TOTAL&&e.colType===a.HeaderType.GRAND_TOTAL?"Grand total":e.rowType===a.HeaderType.GRAND_TOTAL?e.columnDimension.value+"/Grand total ":e.colType===a.HeaderType.GRAND_TOTAL?e.rowDimension.value+"/Grand total ":e.rowDimension.value+"/"+e.columnDimension.value;var r=window.getComputedStyle(c.getDOMNode(),null);d.show({title:t,comp:{type:l.Grid,props:{headers:u.pgrid.config.getDataSourceFieldCaptions(),data:o,theme:u.pgrid.config.theme}},theme:u.pgrid.config.theme,style:{fontFamily:r.getPropertyValue("font-family"),fontSize:r.getPropertyValue("font-size")}})}},t()}},{"./orb.axe":3,"./orb.pgrid":8,"./orb.ui.cols":13,"./orb.ui.header":14,"./orb.ui.rows":16,"./react/orb.react.compiled":18}],16:[function(e,t){var n=e("./orb.axe"),o=e("./orb.ui.axe"),a=e("./orb.ui.header");t.exports=function(e){function t(e,t){if(i.isMultiDataFields())for(var n=e[e.length-1],o=0;o<i.dataFieldsCount();o++)n.push(new a.dataHeader(i.axe.pgrid.config.dataFields[o],t)),o<i.dataFieldsCount()-1&&e.push(n=[])}function r(e,o){if(o.values.length>0)for(var l=e.length-1,s=e[l],c=s.length>0?s[s.length-1]:null,u=0;u<o.values.length;u++){var d,p=o.values[u],h=o.subdimvals[p];d=!h.isLeaf&&h.field.subTotal.visible?new a.header(n.Type.ROWS,a.HeaderType.SUB_TOTAL,h,c,i.dataFieldsCount()):null;var f=new a.header(n.Type.ROWS,null,h,c,i.dataFieldsCount(),d);u>0&&e.push(s=[]),s.push(f),h.isLeaf?t(e,f):(r(e,h),h.field.subTotal.visible&&(e.push([d]),t(e,d)))}}var i=this;o.call(i,e),this.build=function(){var e,o=[];if(null!=i.axe){if((i.axe.root.values.length>0||i.axe.pgrid.config.grandTotal.rowsvisible)&&(o.push([]),r(o,i.axe.root),i.axe.pgrid.config.grandTotal.rowsvisible)){var l=o[o.length-1];e=new a.header(n.Type.ROWS,a.HeaderType.GRAND_TOTAL,i.axe.root,null,i.dataFieldsCount()),0===l.length?l.push(e):o.push([e])}0===o.length&&o.push([e=new a.header(n.Type.ROWS,a.HeaderType.INNER,i.axe.root,null,i.dataFieldsCount())]),e&&t(o,e)}i.headers=o},this.build()}},{"./orb.axe":3,"./orb.ui.axe":12,"./orb.ui.header":14}],17:[function(e,t){(function(e){t.exports={ns:function(e,t){var n=e.split("."),o=0;for(t=t||window;o<n.length;)t[n[o]]=t[n[o]]||{},t=t[n[o]],o++;return t},ownProperties:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},isNumber:function(e){return"[object Number]"===Object.prototype.toString.apply(e)},isDate:function(e){return"[object Date]"===Object.prototype.toString.apply(e)},isString:function(e){return"[object String]"===Object.prototype.toString.apply(e)},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.apply(e)},escapeRegex:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},findInArray:function(e,t){if(this.isArray(e)&&t)for(var n=0;n<e.length;n++){var o=e[n];if(t(o))return o}return void 0},jsonStringify:function(e,t){function n(e,n){return t&&t.indexOf(e)>-1?void 0:n}return JSON.stringify(e,n,2)}},function(t){function n(e){this.message=e}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.name="InvalidCharacterError",t.btoa=e&&e.btoa?function(t){return e.btoa(t)}:function(e){for(var t,a,r=String(e),i=0,l=o,s="";r.charAt(0|i)||(l="=",i%1);s+=l.charAt(63&t>>8-i%1*8)){if(a=r.charCodeAt(i+=.75),a>255)throw new n("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|a}return s},t.atob=e&&e.atob?function(t){return e.atob(t)}:function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var a,r,i=0,l=0,s="";r=t.charAt(l++);~r&&(a=i%4?64*a+r:r,i++%4)?s+=String.fromCharCode(255&a>>(-2*i&6)):0)r=o.indexOf(r);return s}}(t.exports)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t){function n(e){if(e&&e.node){for(var t=e.node,n=[],o=0;o<t.rows.length;o++){for(var a=t.rows[o],r=0,i=null,l=0;l<a.cells.length;l++){var s=a.cells[l];if(s.__orb._visible)for(var c=Math.ceil(s.__orb._textWidth/s.__orb._colSpan+s.__orb._paddingLeft+s.__orb._paddingRight+s.__orb._borderLeftWidth+s.__orb._borderRightWidth),u=(s.__orb._rowSpan>1&&s.__orb._rowSpan>=t.rows.length-o,0);u<s.__orb._colSpan;u++){for(i=n[r];i&&i.inhibit>0;)i.inhibit--,r++,i=n[r];n.length-1<r?n.push({width:c}):c>n[r].width&&(n[r].width=c),n[r].inhibit=s.__orb._rowSpan-1,r++}}for(i=n[r];i;)i.inhibit>0&&i.inhibit--,r++,i=n[r]}e.size.width=0,e.widthArray=n.map(function(t){return e.size.width+=t.width,t.width})}}function o(e){var t=e.cell,n=t.cssclass;n+=e.className||"";"cell-template-empty"===t.template;return t.visible()||(n+=" cell-hidden"),t.type===u.HeaderType.SUB_TOTAL&&t.expanded&&(n+=" header-st-exp"),t.type===u.HeaderType.GRAND_TOTAL&&(1===t.dim.depth?n+=" header-nofields":t.dim.depth>2&&(n+=" header-gt-exp")),e.leftmost&&(n+=" "+("cell-template-datavalue"===t.template?"cell":"header")+"-leftmost"),e.topmost&&(n+=" cell-topmost"),n}function a(e){var t=this;this.scrollBarComp=e,this.callback=null,this.raise=function(){t.callback&&t.callback(t.scrollBarComp.getScrollPercent())}}function r(e,t){function n(e,t){return null==t?"none"!=e.parentNode.parentNode.style.display:void(e.parentNode.parentNode.style.display=t?"":"none")}function o(){if(t){var e={values:t.staticValue,toExclude:t.excludeStatic};t.term?(h=!0,g=t.operator,c.toggleRegexpButtonVisibility(),t.regexpMode?(f=!0,c.toggleRegexpButtonState(),m=t.term.source):m=t.term,v.searchBox.value=m,c.applyFilterTerm(t.operator,t.term)):i=e,c.updateCheckboxes(e),c.updateAllCheckbox()}}function a(){c.toggleRegexpButtonVisibility(),v.filterContainer.addEventListener("click",c.valueChecked),v.searchBox.addEventListener("keyup",c.searchChanged),v.clearSearchButton.addEventListener("click",c.clearSearchBox),v.okButton.addEventListener("click",function(){var t=c.getCheckedValues();e.onFilter(g.name,g.regexpSupported&&h&&f?new RegExp(m,"i"):m,t.values,t.toExclude)}),v.cancelButton.addEventListener("click",function(){e.destroy()})}function r(e,t,n){var o=301,a=223,r={x:0,y:0},i=!1;this.resizeMouseDown=function(e){0===e.button&&(i=!0,document.body.style.cursor="se-resize",r.x=e.pageX,r.y=e.pageY,e.stopPropagation(),e.preventDefault())},this.resizeMouseUp=function(){return i=!1,document.body.style.cursor="auto",!0},this.resizeMouseMove=function(l){if(i){var s=n.getBoundingClientRect(),c=e.getBoundingClientRect(),u=t.getBoundingClientRect(),d=c.right-c.left,p=c.bottom-c.top,h={x:o>=d&&l.pageX<s.left?0:l.pageX-r.x,y:a>=p&&l.pageY<s.top?0:l.pageY-r.y},f=d+h.x,g=p+h.y;r.x=l.pageX,r.y=l.pageY,f>=o&&(e.style.width=f+"px"),g>=a&&(e.style.height=g+"px",t.style.height=u.bottom-u.top+h.y+"px"),l.stopPropagation(),l.preventDefault()}},n.addEventListener("mousedown",this.resizeMouseDown),document.addEventListener("mouseup",this.resizeMouseUp),document.addEventListener("mousemove",this.resizeMouseMove)}var i,l,c=this,u="indeterminate",h=!1,f=!1,g=d.Operators.MATCH,m="",v={filterContainer:null,checkboxes:{},searchBox:null,operatorBox:null,allCheckbox:null,addCheckbox:null,enableRegexButton:null,clearSearchButton:null,okButton:null,cancelButton:null,resizeGrip:null};this.init=function(e){v.filterContainer=e,v.checkboxes={},v.searchBox=v.filterContainer.rows[0].cells[2].children[0].rows[0].cells[0].children[0],v.clearSearchButton=v.filterContainer.rows[0].cells[2].children[0].rows[0].cells[1].children[0],v.operatorBox=v.filterContainer.rows[0].cells[0].children[0],v.okButton=v.filterContainer.rows[2].cells[0].children[0],v.cancelButton=v.filterContainer.rows[2].cells[0].children[1],v.resizeGrip=v.filterContainer.rows[2].cells[1].children[0];for(var t=v.filterContainer.rows[1].cells[0].children[0].rows,n=0;n<t.length;n++){var i=t[n].cells[0].children[0];v.checkboxes[i.value]=i}v.allCheckbox=v.checkboxes[d.ALL],v.addCheckbox=null,v.enableRegexButton=v.filterContainer.rows[0].cells[1],l=new r(v.filterContainer.parentNode,v.filterContainer.rows[1].cells[0].children[0],v.resizeGrip),o(),a()},this.onOperatorChanged=function(e){g.name!==e&&(g=d.Operators.get(e),c.toggleRegexpButtonVisibility(),c.searchChanged("operatorChanged"))},this.clearSearchBox=function(){v.searchBox.value="",c.searchChanged()},this.toggleRegexpButtonVisibility=function(){g.regexpSupported?(v.enableRegexButton.addEventListener("click",c.regexpActiveChanged),p.removeClass(v.enableRegexButton,"srchtyp-col-hidden")):(v.enableRegexButton.removeEventListener("click",c.regexpActiveChanged),p.addClass(v.enableRegexButton,"srchtyp-col-hidden"))},this.toggleRegexpButtonState=function(){v.enableRegexButton.className=v.enableRegexButton.className.replace("srchtyp-col-active",""),f?p.addClass(v.enableRegexButton,"srchtyp-col-active"):p.removeClass(v.enableRegexButton,"srchtyp-col-active")},this.regexpActiveChanged=function(){f=!f,c.toggleRegexpButtonState(),c.searchChanged("regexModeChanged")},this.valueChecked=function(e){var t=e.target;t&&t.type&&"checkbox"===t.type&&(t==v.allCheckbox?c.updateCheckboxes({values:v.allCheckbox.checked}):c.updateAllCheckbox())},this.applyFilterTerm=function(t,o){var a=o?!1:!0,r=t.regexpSupported&&h?f?o:s.escapeRegex(o):o;n(v.allCheckbox,a);for(var i=0;i<e.values.length;i++){var l=e.values[i],c=v.checkboxes[l],u=!h||t.func(l,r);n(c,u),c.checked=u}},this.searchChanged=function(e){var t=(v.searchBox.value||"").trim();if("operatorChanged"===e||"regexModeChanged"===e&&t||t!=m){m=t;var n=h;h=""!==t,h&&!n&&(i=c.getCheckedValues()),("operatorChanged"!==e||h)&&c.applyFilterTerm(g,t),!h&&n&&c.updateCheckboxes(i),c.updateAllCheckbox()}},this.getCheckedValues=function(){if(h||v.allCheckbox.indeterminate){var t,o,a,r,i=0,l=0;for(o=0;o<e.values.length;o++)a=e.values[o],r=v.checkboxes[a],n(r)&&(i++,r.checked&&l++);var s=!1;if(0===l)t=d.NONE;else if(l==i)t=d.ALL;else for(t=[],s=l>i/2+1,o=0;o<e.values.length;o++)a=e.values[o],r=v.checkboxes[a],n(r)&&(!s&&r.checked||s&&!r.checked)&&t.push(a);return{values:t,toExclude:s}}return{values:v.allCheckbox.checked?d.ALL:d.NONE,toExclude:!1}},this.updateCheckboxes=function(t){for(var o=t?t.values:null,a=s.isArray(o)?null:null==o||o===d.ALL?!0:o===d.NONE?!1:!!o,r=0;r<e.values.length;r++){var i=e.values[r],l=v.checkboxes[i];if(n(l))if(null!=a)l.checked=a;else{var c=o.indexOf(i)>=0;l.checked=t.toExclude?!c:c}}},this.updateAllCheckbox=function(){if(!h){for(var t=null,n=0;n<e.values.length;n++){var o=v.checkboxes[e.values[n]];if(null==t)t=o.checked;else if(t!==o.checked){t=u;break}}t===u?(v.allCheckbox.indeterminate=!0,v.allCheckbox.checked=!1):(v.allCheckbox.indeterminate=!1,v.allCheckbox.checked=t)}}}function i(){var e=document.createElement("div");return e.className="orb-overlay orb-overlay-hidden",document.body.appendChild(e),e}var l="undefined"==typeof window?e("react"):window.React,s=e("../orb.utils"),c=e("../orb.axe"),u=e("../orb.ui.header"),d=e("../orb.filtering"),p=e("./orb.react.utils"),h=t.exports,f=1,g={};t.exports.PivotTable=l.createClass({id:f++,pgrid:null,pgridwidget:null,getInitialState:function(){return h.DragManager.init(this),g[this.id]=[],this.registerThemeChanged(this.updateClasses),this.pgridwidget=this.props.pgridwidget,this.pgrid=this.pgridwidget.pgrid,{}},sort:function(e,t){this.pgridwidget.sort(e,t),this.setProps({})},moveButton:function(e,t,n){this.pgridwidget.moveField(e.props.field.name,e.props.axetype,t,n)&&this.setProps({})},toggleFieldExpansion:function(e,t,n){this.pgridwidget.toggleFieldExpansion(e,t,n)&&this.setProps({})},toggleSubtotals:function(e){this.pgridwidget.toggleSubtotals(e)&&this.setProps({})},toggleGrandtotal:function(e){this.pgridwidget.toggleGrandtotal(e)&&this.setProps({})},expandRow:function(e){e.expand(),this.setProps({})},collapseRow:function(e){e.subtotalHeader.collapse(),this.setProps({})},applyFilter:function(e,t,n,o,a){this.pgridwidget.applyFilter(e,t,n,o,a),this.setProps({})},registerThemeChanged:function(e){e&&g[this.id].push(e)},unregisterThemeChanged:function(e){var t;e&&(t=g[this.id].indexOf(e))>=0&&g[this.id].splice(t,1)},changeTheme:function(e){if(this.pgridwidget.pgrid.config.setTheme(e))for(var t=0;t<g[this.id].length;t++)g[this.id][t]()},updateClasses:function(){var e=this.getDOMNode(),t=this.pgridwidget.pgrid.config.theme.getPivotClasses();e.className=t.container,e.children[1].className=t.table},componentDidUpdate:function(){this.synchronizeCompsWidths()},componentDidMount:function(){var e=this.refs.dataCellsContainer.getDOMNode(),t=this.refs.dataCellsTable.getDOMNode(),n=this.refs.colHeadersContainer.getDOMNode(),o=this.refs.rowHeadersContainer.getDOMNode();this.refs.horizontalScrollBar.setScrollClient(e,function(o){var a=Math.ceil(o*(p.getSize(t).width-p.getSize(e).width));n.scrollLeft=a,e.scrollLeft=a}),this.refs.verticalScrollBar.setScrollClient(e,function(n){var a=Math.ceil(n*(p.getSize(t).height-p.getSize(e).height));o.scrollTop=a,e.scrollTop=a}),this.synchronizeCompsWidths()},onWheel:function(e){var t,n,o;console.log(e),e.currentTarget==(t=this.refs.colHeadersContainer.getDOMNode())?(n=this.refs.horizontalScrollBar,o=e.deltaX||e.deltaY):e.currentTarget==(t=this.refs.rowHeadersContainer.getDOMNode())?(n=this.refs.verticalScrollBar,o=e.deltaY):e.currentTarget==(t=this.refs.dataCellsContainer.getDOMNode())&&(e.deltaX&&this.refs.horizontalScrollBar.scroll(e.deltaX,e.deltaMode)&&(e.stopPropagation(),e.preventDefault()),n=this.refs.verticalScrollBar,o=e.deltaY),n&&n.scroll(o,e.deltaMode)&&(e.stopPropagation(),e.preventDefault())},synchronizeCompsWidths:function(){var e=this,t=e.refs.pivotWrapperTable.getDOMNode(),o=function(){var t={};return["pivotContainer","dataCellsContainer","dataCellsTable","upperbuttonsRow","columnbuttonsRow","colHeadersContainer","rowHeadersContainer","rowButtonsContainer","toolbar","horizontalScrollBar","verticalScrollBar"].forEach(function(n){e.refs[n]&&(t[n]={node:e.refs[n].getDOMNode()},t[n].size=p.getSize(t[n].node))}),t}();o.colHeadersTable={node:o.colHeadersContainer.node.children[0]},o.colHeadersTable.size=p.getSize(o.colHeadersTable.node),o.rowHeadersTable={node:o.rowHeadersContainer.node.children[0]},o.rowHeadersTable.size=p.getSize(o.rowHeadersTable.node);var a=p.getSize(o.rowButtonsContainer.node.children[0]).width;n(o.dataCellsTable),n(o.colHeadersTable),n(o.rowHeadersTable);for(var r=[],i=0,l=0;l<o.dataCellsTable.widthArray.length;l++){var s=Math.max(o.dataCellsTable.widthArray[l],o.colHeadersTable.widthArray[l]);r.push(s),i+=s}var c=Math.max(o.rowHeadersTable.size.width,a,67),u=c-o.rowHeadersTable.size.width;u>0&&(o.rowHeadersTable.size.width+=u,o.rowHeadersTable.widthArray[o.rowHeadersTable.widthArray.length-1]+=u),p.updateTableColGroup(o.dataCellsTable.node,r),p.updateTableColGroup(o.colHeadersTable.node,r),p.updateTableColGroup(o.rowHeadersTable.node,o.rowHeadersTable.widthArray),o.dataCellsTable.node.style.width=i+"px",o.colHeadersTable.node.style.width=i+"px",o.rowHeadersTable.node.style.width=c+"px";var d=Math.min(i+1,o.pivotContainer.size.width-c-o.verticalScrollBar.size.width);o.dataCellsContainer.node.style.width=d+"px",o.colHeadersContainer.node.style.width=d+"px";var h=this.pgridwidget.pgrid.config.height;if(h){var f=Math.ceil(Math.min(h-(o.toolbar?o.toolbar.size.height+17:0)-o.upperbuttonsRow.size.height-o.columnbuttonsRow.size.height-o.colHeadersTable.size.height-o.horizontalScrollBar.size.height,o.dataCellsTable.size.height));o.dataCellsContainer.node.style.height=f+"px",o.rowHeadersContainer.node.style.height=f+"px"}p.updateTableColGroup(t,[c,d,o.verticalScrollBar.size.width,Math.max(o.pivotContainer.size.width-(c+d+o.verticalScrollBar.size.width),0)]),this.refs.horizontalScrollBar.refresh(),this.refs.verticalScrollBar.refresh()},render:function(){var e=this,t=this.pgridwidget.pgrid.config,n=h.Toolbar,o=h.PivotTableUpperButtons,a=h.PivotTableColumnButtons,r=h.PivotTableRowButtons,i=h.PivotTableRowHeaders,l=h.PivotTableColumnHeaders,s=h.PivotTableDataCells,c=h.HorizontalScrollBar,u=h.VerticalScrollBar,d=t.theme.getPivotClasses(),p={};return t.width&&(p.width=t.width),t.height&&(p.height=t.height),React.createElement("div",{className:d.container,style:p,ref:"pivotContainer"},t.toolbar&&t.toolbar.visible?React.createElement("div",{ref:"toolbar",className:"orb-toolbar"},React.createElement(n,{pivotTableComp:e})):null,React.createElement("table",{id:"tbl-"+e.id,ref:"pivotWrapperTable",className:d.table,style:{tableLayout:"fixed"}},React.createElement("colgroup",null,React.createElement("col",{ref:"column1"}),React.createElement("col",{ref:"column2"}),React.createElement("col",{ref:"column3"}),React.createElement("col",{ref:"column4"})),React.createElement("tbody",null,React.createElement("tr",{className:"pivot-table upper-buttons",ref:"upperbuttonsRow"},React.createElement("td",{colSpan:"4"},React.createElement(o,{pivotTableComp:e}))),React.createElement("tr",{className:"pivot-table column-buttons",ref:"columnbuttonsRow"},React.createElement("td",null),React.createElement("td",{style:{padding:"11px 4px !important"}},React.createElement(a,{pivotTableComp:e})),React.createElement("td",{colSpan:"2"})),React.createElement("tr",null,React.createElement("td",{className:"pivot-table row-buttons",style:{position:"relative"}},React.createElement(r,{pivotTableComp:e,ref:"rowButtonsContainer"})),React.createElement("td",{className:"pivot-table column-headers"},React.createElement(l,{pivotTableComp:e,ref:"colHeadersContainer"})),React.createElement("td",{colSpan:"2"})),React.createElement("tr",null,React.createElement("td",{className:"pivot-table row-headers"},React.createElement(i,{pivotTableComp:e,ref:"rowHeadersContainer"})),React.createElement("td",{className:"pivot-table data-cells"},React.createElement("div",{className:"inner-table-container data-cntr",ref:"dataCellsContainer",onWheel:this.onWheel},React.createElement(s,{pivotTableComp:e,ref:"dataCellsTable"}))),React.createElement("td",null,React.createElement(u,{pivotTableComp:e,ref:"verticalScrollBar"})),React.createElement("td",null)),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",null,React.createElement(c,{pivotTableComp:e,ref:"horizontalScrollBar"})),React.createElement("td",{colSpan:"2"})))),React.createElement("div",{className:"orb-overlay orb-overlay-hidden",id:"drilldialog"+e.id}))}}),t.exports.PivotRow=l.createClass({render:function(){var e,t=this,n=h.PivotCell,o=(this.props.row.length-1,this.props.row[0],!1),a=t.props.layoutInfos,r={},i=!1;return e=this.props.row.map(function(e,r){var l=!1,s="pivot-cell cell-"+(r+1)+" ";return e.visible()&&a&&(e.dim?((e.dim.isRoot&&void 0===a.topMostCells[e.dim.depth-1]||!e.dim.isRoot&&void 0===a.topMostCells[e.dim.depth]&&(e.dim.parent.isRoot||a.topMostCells[e.dim.depth+1]===e.dim.parent))&&(i=!0,a.topMostCells[e.dim.depth]=e.dim),e.dim.field&&(s+=e.dim.field.caption.toLowerCase())):a.topMostCells[0]||(i=a.topMostCells[0]=!0),o||t.props.axetype!==c.Type.DATA&&t.props.axetype!==c.Type.COLUMNS||0!==a.lastLeftMostCellVSpan||(l=o=!0,a.lastLeftMostCellVSpan=e.vspan()-1)),React.createElement(n,{key:r,cell:e,leftmost:l,topmost:i,pivotTableComp:t.props.pivotTableComp,className:s})}),a&&a.lastLeftMostCellVSpan>0&&!o&&a.lastLeftMostCellVSpan--,React.createElement("tr",{style:r,className:this.props.className||"pivot-row"},e)}});var m=null,v=null;t.exports.PivotCell=l.createClass({expand:function(){this.props.pivotTableComp.expandRow(this.props.cell)},collapse:function(){this.props.pivotTableComp.collapseRow(this.props.cell)},updateCellInfos:function(){var e=this.getDOMNode(),t=this.props.cell;if(e.__orb=e.__orb||{},t.visible()){var n=this.refs.cellContent.getDOMNode(),o=(e.textContent,[]),a=null==m,r=!this.props.leftmost&&null==v;if(a&&o.push("padding-left"),r&&o.push("border-left-width"),o.length>0){var i=p.getStyle(e,o,!0);a&&(m=parseFloat(i[0])),r&&(v=parseFloat(i[a?1:0]))}p.removeClass(e,"cell-hidden"),e.__orb._visible=!0,e.__orb._textWidth=p.getSize(n).width,e.__orb._colSpan=this.props.cell.hspan(!0)||1,e.__orb._rowSpan=this.props.cell.vspan(!0)||1,e.__orb._paddingLeft=m,e.__orb._paddingRight=m,e.__orb._borderLeftWidth=this.props.leftmost?0:v,e.__orb._borderRightWidth=0}else e.__orb._visible=!1},componentDidMount:function(){this.updateCellInfos()},componentDidUpdate:function(){this.updateCellInfos()},shouldComponentUpdate:function(e){return!e.cell||e.cell!=this.props.cell||this._latestVisibleState||e.cell.visible()?!0:!1},_latestVisibleState:!1,render:function(){var e,t,n=this,a=this.props.cell,r=[],i=!1;switch(this._latestVisibleState=a.visible(),a.template){case"cell-template-row-header":case"cell-template-column-header":var l=a.type===u.HeaderType.WRAPPER&&a.dim.field.subTotal.visible&&a.dim.field.subTotal.collapsible,s=a.type===u.HeaderType.SUB_TOTAL&&!a.expanded;l||s?(i=!0,r.push(React.createElement("table",{key:"header-value",ref:"cellContent"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{className:"orb-tgl-btn"},React.createElement("div",{className:"orb-tgl-btn-"+(l?"down":"right"),onClick:l?this.collapse:this.expand})),React.createElement("td",{className:"hdr-val"},React.createElement("div",{dangerouslySetInnerHTML:{__html:a.value||"&#160;"}}))))))):e=(a.value||"&#160;")+(a.type===u.HeaderType.SUB_TOTAL?" Total":"");break;case"cell-template-dataheader":e=a.value.caption;break;case"cell-template-datavalue":e=a.datafield&&a.datafield.formatFunc?a.datafield.formatFunc()(a.value):a.value,t=function(){n.props.pivotTableComp.pgridwidget.drilldown(a,n.props.pivotTableComp.id)}}if(!i){var c;switch(a.template){case"cell-template-datavalue":c="cell-data";break;default:"cell-template-dataheader"!=a.template&&a.type!==u.HeaderType.GRAND_TOTAL&&(c="hdr-val")}r.push(React.createElement("div",{key:"cell-value",ref:"cellContent",className:c},React.createElement("div",{dangerouslySetInnerHTML:{__html:e||"&#160;"}})))}return React.createElement("td",{className:o(this.props),onDoubleClick:t,colSpan:a.hspan(),rowSpan:a.vspan()},React.createElement("div",null,r))}});var b=t.exports.DragManager=function(){function e(e,t){return!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function t(e,t){l?a(l,function(){l=e,o(e,t)}):(l=e,o(e,t))}function n(e){s?a(s,function(){s=e,o(e)}):(s=e,o(e))}function o(e,t){e&&e.onDragOver?e.onDragOver(t):t&&t()}function a(e,t){e&&e.onDragEnd?e.onDragEnd(t):t&&t()}var r=null,i=null,l=null,s=null,c=null,u=[],d=[],h=!1;return{init:function(e){h=!0,r=e},setDragElement:function(e){var o=i;if(i=e,i!=o)if(null==e){if(l){var a=null!=s?s.position:null;r.moveButton(o,l.component.props.axetype,a)}c=null,t(null),n(null)}else c=i.getDOMNode()},registerTarget:function(e,t,n,o){u.push({component:e,axetype:t,onDragOver:n,onDragEnd:o})},unregisterTarget:function(e){for(var t,n=0;n<u.length;n++)if(u[n].component==e){t=n;break}null!=t&&u.splice(t,1)},registerIndicator:function(e,t,n,o,a){d.push({component:e,axetype:t,position:n,onDragOver:o,onDragEnd:a})},unregisterIndicator:function(e){for(var t,n=0;n<d.length;n++)if(d[n].component==e){t=n;break}null!=t&&d.splice(t,1)},elementMoved:function(){if(null!=i){var o,a=c.getBoundingClientRect();p.forEach(u,function(t){if(!o){var n=t.component.getDOMNode().getBoundingClientRect(),r=e(a,n);if(r)return void(o=t)}},!0),o&&t(o,function(){var t=null;if(p.forEach(d,function(n){if(!t){var r=n.component.props.axetype===i.props.axetype&&n.component.props.position===i.props.position,l=n.component.props.axetype===o.component.props.axetype;if(l&&!r){var s=n.component.getDOMNode().getBoundingClientRect(),c=e(a,s);if(c)return void(t=n)}}}),!t){var r=d.filter(function(e){return e.component.props.axetype===o.component.props.axetype});r.length>0&&(t=r[r.length-1])}n(t)})}}}}();t.exports.DropIndicator=l.createClass({displayName:"DropIndicator",getInitialState:function(){return b.registerIndicator(this,this.props.axetype,this.props.position,this.onDragOver,this.onDragEnd),{isover:!1}},componentWillUnmount:function(){b.unregisterIndicator(this)},onDragOver:function(e){this.isMounted()?this.setState({isover:!0},e):e&&e()},onDragEnd:function(e){this.isMounted()?this.setState({isover:!1},e):e&&e()},render:function(){var e="drp-indic";this.props.isFirst&&(e+=" drp-indic-first"),this.props.isLast&&(e+=" drp-indic-last");var t={};return this.state.isover&&(e+=" drp-indic-over"),React.createElement("div",{style:t,className:e})}});var y=0;t.exports.DropTarget=l.createClass({getInitialState:function(){return this.dtid=++y,{isover:!1}},componentDidMount:function(){b.registerTarget(this,this.props.axetype,this.onDragOver,this.onDragEnd)},componentWillUnmount:function(){b.unregisterTarget(this)},onDragOver:function(e){this.isMounted()?this.setState({isover:!0},e):e&&e()},onDragEnd:function(e){this.isMounted()?this.setState({isover:!1},e):e&&e()},render:function(){var e=this,n=t.exports.DropIndicator,o=this.props.buttons.map(function(t,o){return o<e.props.buttons.length-1?[React.createElement("td",null,React.createElement(n,{isFirst:0===o,position:o,axetype:e.props.axetype})),React.createElement("td",null,t)]:[React.createElement("td",null,React.createElement(n,{isFirst:0===o,position:o,axetype:e.props.axetype})),React.createElement("td",null,t),React.createElement("td",null,React.createElement(n,{isLast:!0,position:null,axetype:e.props.axetype}))]}),a=e.props.axetype===c.Type.ROWS?{position:"absolute",left:0,bottom:11}:null;return React.createElement("div",{className:"drp-trgt"+(this.state.isover?" drp-trgt-over":"")+(0===o.length?" drp-trgt-empty":""),style:a},React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",null,o))))}});var x=0;t.exports.PivotButton=l.createClass({displayName:"PivotButton",getInitialState:function(){return this.pbid=++x,{pos:{x:0,y:0},startpos:{x:0,y:0},mousedown:!1,dragging:!1}},onFilterMouseDown:function(e){if(0===e.button){var t=this.refs.filterButton.getDOMNode(),n=p.getOffset(t),o=document.createElement("div"),a=React.createFactory(h.FilterPanel),r=a({field:this.props.field.name,pivotTableComp:this.props.pivotTableComp});o.className=this.props.pivotTableComp.pgrid.config.theme.getFilterClasses().container,o.style.top=n.y+"px",o.style.left=n.x+"px",document.body.appendChild(o),React.render(r,o),e.stopPropagation(),e.preventDefault()}},componentDidUpdate:function(){this.props.pivotTableComp.pgrid.config.canMoveFields&&(this.state.mousedown?this.state.mousedown&&(b.setDragElement(this),document.addEventListener("mousemove",this.onMouseMove)):(b.setDragElement(null),document.removeEventListener("mousemove",this.onMouseMove)))},componentDidMount:function(){this.props.pivotTableComp.registerThemeChanged(this.updateClasses)},componentWillUnmount:function(){this.props.pivotTableComp.unregisterThemeChanged(this.updateClasses),document.removeEventListener("mousemove",this.onMouseMove)},onMouseDown:function(e){if(0===e.button){if(e.ctrlKey)this.props.pivotTableComp.toggleFieldExpansion(this.props.axetype,this.props.field);else{var t=p.getOffset(this.getDOMNode());this.setState({mousedown:!0,mouseoffset:{x:t.x-e.pageX,y:t.y-e.pageY},startpos:{x:e.pageX,y:e.pageY}})}e.stopPropagation(),e.preventDefault()}},onMouseUp:function(e){var t=this.state.dragging;this.setState({mousedown:!1,dragging:!1,size:null,pos:{x:0,y:0}}),e.ctrlKey||t||this.props.pivotTableComp.sort(this.props.axetype,this.props.field)},onMouseMove:function(e){if(this.props.pivotTableComp.pgrid.config.canMoveFields&&this.state.mousedown){var t=null;t=this.state.dragging?this.state.size:p.getSize(this.getDOMNode());var n={x:e.pageX+this.state.mouseoffset.x,y:e.pageY+this.state.mouseoffset.y};this.setState({dragging:!0,size:t,pos:n}),b.elementMoved(),e.stopPropagation(),e.preventDefault()}},updateClasses:function(){this.getDOMNode().className=this.props.pivotTableComp.pgrid.config.theme.getButtonClasses().pivotButton},render:function(){var e=this,t={left:e.state.pos.x+"px",top:e.state.pos.y+"px",position:e.state.dragging?"fixed":"",zIndex:101};e.state.size&&(t.width=e.state.size.width+"px");var n="asc"===e.props.field.sort.order?"sort-asc":"desc"===e.props.field.sort.order?"sort-desc":"",o=(e.state.dragging?"":"fltr-btn")+(this.props.pivotTableComp.pgrid.isFieldFiltered(this.props.field.name)?" fltr-btn-active":""),a="";return e.props.axetype===c.Type.DATA&&(a=React.createElement("small",null," ("+e.props.field.aggregateFuncName+")")),React.createElement("div",{key:e.props.field.name,className:this.props.pivotTableComp.pgrid.config.theme.getButtonClasses().pivotButton,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,style:t},React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{className:"caption"},e.props.field.caption,a),React.createElement("td",null,React.createElement("div",{className:"sort-indicator "+n})),React.createElement("td",{className:"filter"},React.createElement("div",{ref:"filterButton",className:o,onMouseDown:e.state.dragging?null:this.onFilterMouseDown}))))))}}),t.exports.PivotTableUpperButtons=l.createClass({render:function(){var e,t=this,n=h.PivotButton,o=h.DropTarget,a=this.props.pivotTableComp.pgridwidget.pgrid.config;
if(a.canMoveFields){var r=a.availablefields().map(function(e,o){return React.createElement(n,{key:e.name,field:e,axetype:null,position:o,pivotTableComp:t.props.pivotTableComp})});e=React.createElement("tr",null,React.createElement("td",{className:"flds-grp-cap av-flds text-muted"},React.createElement("div",null,"Fields")),React.createElement("td",{className:"av-flds"},React.createElement(o,{buttons:r,axetype:null})))}else e=null;var i=a.dataFields.map(function(e,o){return React.createElement(n,{key:e.name,field:e,axetype:c.Type.DATA,position:o,pivotTableComp:t.props.pivotTableComp})}),l=React.createElement("tr",null,React.createElement("td",{className:"flds-grp-cap text-muted"},React.createElement("div",null,"Data")),React.createElement("td",{className:"empty"},React.createElement(o,{buttons:i,axetype:c.Type.DATA})));return React.createElement("table",{className:"inner-table upper-buttons"},React.createElement("tbody",null,e,l))}}),t.exports.PivotTableColumnButtons=l.createClass({render:function(){var e=this,t=h.PivotButton,n=h.DropTarget,o=this.props.pivotTableComp.pgridwidget.pgrid.config,a=o.columnFields.map(function(n,o){return React.createElement(t,{key:n.name,field:n,axetype:c.Type.COLUMNS,position:o,pivotTableComp:e.props.pivotTableComp})});return React.createElement(n,{buttons:a,axetype:c.Type.COLUMNS})}}),t.exports.PivotTableRowButtons=l.createClass({render:function(){var e=this,t=h.PivotButton,n=h.DropTarget,o=this.props.pivotTableComp.pgridwidget.pgrid.config,a=o.rowFields.map(function(n,o){return React.createElement(t,{key:n.name,field:n,axetype:c.Type.ROWS,position:o,pivotTableComp:e.props.pivotTableComp})});return React.createElement(n,{buttons:a,axetype:c.Type.ROWS})}}),t.exports.PivotTableColumnHeaders=l.createClass({render:function(){var e=this,t=h.PivotRow,n=this.props.pivotTableComp.pgridwidget,o=0===n.columns.headers.length?"":" columns-cntr",a={lastLeftMostCellVSpan:0,topMostCells:{}},r=n.columns.headers.map(function(n,o){return React.createElement(t,{key:o,row:n,axetype:c.Type.COLUMNS,pivotTableComp:e.props.pivotTableComp,layoutInfos:a,className:"column-header-row"})});return React.createElement("div",{className:"inner-table-container"+o,ref:"colHeadersContainer",onWheel:this.props.pivotTableComp.onWheel},React.createElement("table",{className:"inner-table"},React.createElement("colgroup",null),React.createElement("tbody",null,r)))}}),t.exports.PivotTableRowHeaders=l.createClass({setColGroup:function(e){var t=this.getDOMNode(),n=this.refs.colgroup.getDOMNode();t.style.tableLayout="auto",n.innerHTML="";for(var o=0;o<e.length;o++){var a=document.createElement("col");a.style.width=e[o]+8+"px",n.appendChild(a)}t.style.tableLayout="fixed"},render:function(){var e=this,t=h.PivotRow,n=this.props.pivotTableComp.pgridwidget,o=0===n.rows.headers.length?"":" rows-cntr",a={lastLeftMostCellVSpan:0,topMostCells:{}},r=n.rows.headers.map(function(n,o){return React.createElement(t,{key:o,row:n,axetype:c.Type.ROWS,layoutInfos:a,pivotTableComp:e.props.pivotTableComp,className:"row-header-row"})});return React.createElement("div",{className:"inner-table-container"+o,ref:"rowHeadersContainer",onWheel:this.props.pivotTableComp.onWheel},React.createElement("table",{className:"inner-table"},React.createElement("colgroup",{ref:"colgroup"}),React.createElement("tbody",null,r)))}}),t.exports.PivotTableDataCells=l.createClass({render:function(){var e=this,t=h.PivotRow,n=this.props.pivotTableComp.pgridwidget,o={lastLeftMostCellVSpan:0,topMostCells:{}},a=n.dataRows.map(function(n,a){return React.createElement(t,{key:a,row:n,axetype:c.Type.DATA,layoutInfos:o,pivotTableComp:e.props.pivotTableComp})});return React.createElement("table",{className:"inner-table"},React.createElement("colgroup",null),React.createElement("tbody",null,a))}});var C={scrollEvent:null,scrollClient:null,getInitialState:function(){return{size:16,mousedown:!1,thumbOffset:0}},componentDidMount:function(){this.scrollEvent=new a(this)},componentDidUpdate:function(){this.state.mousedown?this.state.mousedown&&(document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)):(document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp))},componentWillUnmount:function(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)},onMouseDown:function(e){if(0===e.button){var t=this.refs.scrollThumb.getDOMNode(),n=p.getParentOffset(t);p.addClass(t,"orb-scrollthumb-hover"),this.setState({mousedown:!0,mouseoffset:e[this.mousePosProp],thumbOffset:n[this.posProp]}),e.stopPropagation(),e.preventDefault()}},onMouseUp:function(){if(this.state.mousedown){var e=this.refs.scrollThumb.getDOMNode();p.removeClass(e,"orb-scrollthumb-hover")}this.setState({mousedown:!1})},onMouseMove:function(e){if(this.state.mousedown){e.stopPropagation(),e.preventDefault();var t=e[this.mousePosProp]-this.state.mouseoffset;this.state.mouseoffset=e[this.mousePosProp],this.scroll(t)}},getScrollSize:function(){return null!=this.scrollClient?p.getSize(this.scrollClient)[this.sizeProp]:p.getSize(this.getDOMNode())[this.sizeProp]},setScrollClient:function(e,t){this.scrollClient=e,this.scrollEvent.callback=t},getScrollPercent:function(){var e=this.getScrollSize()-this.state.size;return 0>=e?0:this.state.thumbOffset/e},refresh:function(){if(this.scrollClient){var e=this.scrollClient.children[0],t=p.getSize(this.scrollClient),n=p.getSize(e),o=this.getScrollSize(),a=t[this.sizeProp]>=n[this.sizeProp]?0:t[this.sizeProp]/n[this.sizeProp]*o;this.setState({containerSize:o,size:a,thumbOffset:Math.min(this.state.thumbOffset,o-a)},this.scrollEvent.raise)}},scroll:function(e,t){if(this.state.size>0){1==t&&(e*=8);var n=this.getScrollSize()-this.state.size,o=this.state.thumbOffset+e;return 0>o&&(o=0),o>n&&(o=n),this.setState({thumbOffset:o},this.scrollEvent.raise),!0}return!1},onWheel:function(e){this.scroll(e.deltaY,e.deltaMode),e.stopPropagation(),e.preventDefault()},render:function(){var e={padding:0};e[this.sizeProp]=this.state.size,e[this.offsetCssProp]=this.state.thumbOffset;var t={};t[this.sizeProp]=this.state.containerSize;var n="orb-scrollthumb "+this.props.pivotTableComp.pgrid.config.theme.getButtonClasses().scrollBar,o=this.state.size<=0?null:React.createElement("div",{className:n,style:e,ref:"scrollThumb",onMouseDown:this.onMouseDown});return React.createElement("div",{className:this.cssClass,style:t,onWheel:this.onWheel},o)}};t.exports.HorizontalScrollBar=l.createClass({mixins:[C],posProp:"x",mousePosProp:"pageX",sizeProp:"width",offsetCssProp:"left",cssClass:"orb-h-scrollbar"}),t.exports.VerticalScrollBar=l.createClass({mixins:[C],posProp:"y",mousePosProp:"pageY",sizeProp:"height",offsetCssProp:"top",cssClass:"orb-v-scrollbar"}),t.exports.FilterPanel=l.createClass({pgridwidget:null,values:null,filterManager:null,getInitialState:function(){return this.pgridwidget=this.props.pivotTableComp.pgridwidget,{}},destroy:function(){var e=this.getDOMNode().parentNode;React.unmountComponentAtNode(e),e.parentNode.removeChild(e)},onFilter:function(e,t,n,o){this.props.pivotTableComp.applyFilter(this.props.field,e,t,n,o),this.destroy()},onMouseDown:function(e){for(var t=this.getDOMNode().parentNode,n=e.target;null!=n;){if(n==t)return!0;n=n.parentNode}this.destroy()},onMouseWheel:function(e){for(var t=this.refs.valuesTable.getDOMNode(),n=e.target;null!=n;){if(n==t)return void(t.scrollHeight<=t.clientHeight&&(e.stopPropagation(),e.preventDefault()));n=n.parentNode}this.destroy()},componentWillMount:function(){document.addEventListener("mousedown",this.onMouseDown),document.addEventListener("wheel",this.onMouseWheel),window.addEventListener("resize",this.destroy)},componentDidMount:function(){this.filterManager.init(this.getDOMNode())},componentWillUnmount:function(){document.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("resize",this.destroy)},render:function(){function e(e,t){return n.push(React.createElement("tr",{key:e},React.createElement("td",{className:"fltr-chkbox"},React.createElement("input",{type:"checkbox",value:e,defaultChecked:"checked"})),React.createElement("td",{className:"fltr-val",title:t||e},t||e)))}var t=h.Dropdown,n=[];this.filterManager=new r(this,this.pgridwidget.pgrid.getFieldFilter(this.props.field)),this.values=this.pgridwidget.pgrid.getFieldValues(this.props.field),e(d.ALL,"(Show All)"),this.values.containsBlank&&e(d.BLANK,"(Blank)");for(var o=0;o<this.values.length;o++)e(this.values[o]);var a=this.props.pivotTableComp.pgrid.config.theme.getButtonClasses().orbButton,i=window.getComputedStyle(this.props.pivotTableComp.getDOMNode(),null),l={fontFamily:i.getPropertyValue("font-family"),fontSize:i.getPropertyValue("font-size")},s=this.pgridwidget.pgrid.getFieldFilter(this.props.field);return React.createElement("table",{className:"fltr-scntnr",style:l},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{className:"srchop-col"},React.createElement(t,{values:[d.Operators.MATCH.name,d.Operators.NOTMATCH.name,d.Operators.EQ.name,d.Operators.NEQ.name,d.Operators.GT.name,d.Operators.GTE.name,d.Operators.LT.name,d.Operators.LTE.name],selectedValue:s&&s.operator?s.operator.name:d.Operators.MATCH.name,onValueChanged:this.filterManager.onOperatorChanged})),React.createElement("td",{className:"srchtyp-col",title:"Enable/disable Regular expressions"},".*"),React.createElement("td",{className:"srchbox-col"},React.createElement("table",{style:{width:"100%"}},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,React.createElement("input",{type:"text",placeholder:"search"})),React.createElement("td",null,React.createElement("div",{className:"srchclear-btn",onClick:this.clearFilter},"x"))))))),React.createElement("tr",null,React.createElement("td",{colSpan:"3",className:"fltr-vals-col"},React.createElement("table",{className:"fltr-vals-tbl",ref:"valuesTable"},React.createElement("tbody",null,n)))),React.createElement("tr",{className:"bottom-row"},React.createElement("td",{className:"cnfrm-btn-col",colSpan:"2"},React.createElement("input",{type:"button",className:a,value:"Ok",style:{"float":"left"}}),React.createElement("input",{type:"button",className:a,value:"Cancel",style:{"float":"left"}})),React.createElement("td",{className:"resize-col"},React.createElement("div",null)))))}}),t.exports.Dropdown=l.createClass({openOrClose:function(e){var t=this.refs.valueElement.getDOMNode(),n=this.refs.valuesList.getDOMNode();n.style.display=e.target===t&&"none"===n.style.display?"block":"none"},onMouseEnter:function(){var e=this.refs.valueElement.getDOMNode();e.className="orb-tgl-btn-down",e.style.backgroundPosition="right center"},onMouseLeave:function(){this.refs.valueElement.getDOMNode().className=""},componentDidMount:function(){document.addEventListener("click",this.openOrClose)},componentWillUnmount:function(){document.removeEventListener("click",this.openOrClose)},selectValue:function(e){for(var t=this.refs.valuesList.getDOMNode(),n=e.target,o=!1;!o&&null!=n;){if(n.parentNode==t){o=!0;break}n=n.parentNode}if(o){var a=n.textContent,r=this.refs.valueElement.getDOMNode();r.textContent!=a&&(r.textContent=a,this.props.onValueChanged&&this.props.onValueChanged(a))}},render:function(){for(var e=[],t=0;t<this.props.values.length;t++)e.push(React.createElement("li",{key:"item"+t,dangerouslySetInnerHTML:{__html:this.props.values[t]}}));return React.createElement("div",{className:"orb-select"},React.createElement("div",{ref:"valueElement",dangerouslySetInnerHTML:{__html:this.props.selectedValue},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave}),React.createElement("ul",{ref:"valuesList",style:{display:"none"},onClick:this.selectValue},e))}}),t.exports.Grid=l.createClass({render:function(){var e=this.props.data,t=this.props.headers,n=this.props.theme.getGridClasses(),o=[];if(t&&t.length>0){for(var a=[],r=0;r<t.length;r++)a.push(React.createElement("th",{key:"h"+r},t[r]));o.push(React.createElement("tr",{key:"h"},a))}if(e&&e.length>0)for(var i=0;i<e.length;i++){var l=[];if(s.isArray(e[i]))for(var c=0;c<e[i].length;c++)l.push(React.createElement("td",{key:i+""+c},e[i][c]));else for(var u in e[i])e[i].hasOwnProperty(u)&&l.push(React.createElement("td",{key:i+""+u},e[i][u]));o.push(React.createElement("tr",{key:i},l))}return React.createElement("table",{className:n.table},React.createElement("tbody",null,o))}});var w=t.exports.Dialog=l.createClass({statics:{create:function(){var e=React.createFactory(w),t=i();return{show:function(n){React.render(e(n),t)}}}},overlayElement:null,setOverlayClass:function(e){this.overlayElement.className=this.props.theme.getDialogClasses(e).overlay},componentDidMount:function(){this.overlayElement=this.getDOMNode().parentNode,this.setOverlayClass(!0),this.overlayElement.addEventListener("click",this.close);var e=this.overlayElement.children[0],t=e.children[0].children[1],n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),a=2*o/3;a=301>a?301:a;var r=e.offsetWidth+(e.offsetHeight>a?11:0),i=e.offsetHeight>a?a:e.offsetHeight;e.style.top=(o>i?(o-i)/2:0)+"px",e.style.left=(n>r?(n-r)/2:0)+"px",e.style.height=i+"px",t.style.width=r+"px",t.style.height=i-45+"px"},close:function(e){(e.target==this.overlayElement||"button-close"===e.target.className)&&(this.overlayElement.removeEventListener("click",this.close),React.unmountComponentAtNode(this.overlayElement),this.setOverlayClass(!1))},render:function(){if(this.props.comp){var e=React.createElement(this.props.comp.type,this.props.comp.props),t=this.props.theme.getDialogClasses();return React.createElement("div",{className:t.dialog,style:this.props.style||{}},React.createElement("div",{className:t.content},React.createElement("div",{className:t.header},React.createElement("div",{className:"button-close",onClick:this.close}),React.createElement("div",{className:t.title},this.props.title)),React.createElement("div",{className:t.body},e)))}}});t.exports.Toolbar=l.createClass({_toInit:[],componentDidMount:function(){for(var e=0;e<this._toInit.length;e++){var t=this._toInit[e];t.init(this.props.pivotTableComp,this.refs[t.ref].getDOMNode())}},componentDidUpdate:function(){for(var e=0;e<this._toInit.length;e++){var t=this._toInit[e];t.init(this.props.pivotTableComp,this.refs[t.ref].getDOMNode())}},createCallback:function(e){if(null!=e){var t=this.props.pivotTableComp;return function(n){e(t,n.target)}}return null},render:function(){var e=this.props.pivotTableComp.pgridwidget.pgrid.config;if(e.toolbar&&e.toolbar.visible){for(var t=e.toolbar.buttons?R.buttons.concat(e.toolbar.buttons):R.buttons,n=[],o=0;o<t.length;o++){var a=t[o],r="btn"+o;n.push("separator"==a.type?React.createElement("div",{key:o,className:"orb-tlbr-sep"}):"label"==a.type?React.createElement("div",{key:o,className:"orb-tlbr-lbl"},a.text):React.createElement("div",{key:o,className:"orb-tlbr-btn "+a.cssClass,title:a.tooltip,ref:r,onClick:this.createCallback(a.action)})),a.init&&this._toInit.push({ref:r,init:a.init})}return React.createElement("div",null,n)}return React.createElement("div",null)}});var T=e("../orb.export.excel"),R={exportToExcel:function(e){var t=document.createElement("a");t.download="orbpivotgrid.xls",t.href=T(e.props.pgridwidget),document.body.appendChild(t),t.click(),document.body.removeChild(t)},expandAllRows:function(e){e.toggleFieldExpansion(c.Type.ROWS,null,!0)},collapseAllRows:function(e){e.toggleFieldExpansion(c.Type.ROWS,null,!1)},expandAllColumns:function(e){e.toggleFieldExpansion(c.Type.COLUMNS,null,!0)},collapseAllColumns:function(e){e.toggleFieldExpansion(c.Type.COLUMNS,null,!1)},updateSubtotalsButton:function(e,t,n){var o=t.pgridwidget.areSubtotalsVisible(e);n.style.display=null===o?"none":"";var a="",r="";o?(a="subtotals-visible",r="subtotals-hidden"):(a="subtotals-hidden",r="subtotals-visible"),p.removeClass(n,r),p.addClass(n,a)},initSubtotals:function(e){var t=this;return function(n,o){t.updateSubtotalsButton(e,n,o)}},toggleSubtotals:function(e){var t=this;return function(n,o){n.toggleSubtotals(e),t.updateSubtotalsButton(e,n,o)}},updateGrandtotalButton:function(e,t,n){var o=t.pgridwidget.isGrandtotalVisible(e);n.style.display=null===o?"none":"";var a="",r="";o?(a="grndtotal-visible",r="grndtotal-hidden"):(a="grndtotal-hidden",r="grndtotal-visible"),p.removeClass(n,r),p.addClass(n,a)},initGrandtotal:function(e){var t=this;return function(n,o){t.updateGrandtotalButton(e,n,o)}},toggleGrandtotal:function(e){var t=this;return function(n,o){n.toggleGrandtotal(e),t.updateGrandtotalButton(e,n,o)}}};R.buttons=[{type:"label",text:"Rows:"},{type:"button",tooltip:"Expand all rows",cssClass:"expand-all",action:R.expandAllRows},{type:"button",tooltip:"Collapse all rows",cssClass:"collapse-all",action:R.collapseAllRows},{type:"button",tooltip:"Toggle rows sub totals",init:R.initSubtotals(c.Type.ROWS),action:R.toggleSubtotals(c.Type.ROWS)},{type:"button",tooltip:"Toggle rows grand total",init:R.initGrandtotal(c.Type.ROWS),action:R.toggleGrandtotal(c.Type.ROWS)},{type:"separator"},{type:"label",text:"Columns:"},{type:"button",tooltip:"Expand all columns",cssClass:"expand-all",action:R.expandAllColumns},{type:"button",tooltip:"Collapse all columns",cssClass:"collapse-all",action:R.collapseAllColumns},{type:"button",tooltip:"Toggle columns sub totals",init:R.initSubtotals(c.Type.COLUMNS),action:R.toggleSubtotals(c.Type.COLUMNS)},{type:"button",tooltip:"Toggle columns grand total",init:R.initGrandtotal(c.Type.COLUMNS),action:R.toggleGrandtotal(c.Type.COLUMNS)},{type:"separator"},{type:"label",text:"Export:"},{type:"button",tooltip:"Export to Excel",cssClass:"export-xls",action:R.exportToExcel}]},{"../orb.axe":3,"../orb.export.excel":6,"../orb.filtering":7,"../orb.ui.header":14,"../orb.utils":17,"./orb.react.utils":19,react:void 0}],19:[function(e,t){t.exports.forEach=function(e,t,n){var o;if(e)for(var a=0,r=e.length;r>a&&(o=t(e[a],a),void 0===o||n!==!0);a++);return o},t.exports.removeClass=function(e,t){if(e&&t)for(;e.className.indexOf(t)>=0;)e.className=e.className.replace(t,"")},t.exports.addClass=function(e,t){e&&t&&e.className.indexOf(t)<0&&(e.className+=" "+t)},t.exports.getOffset=function(e){if(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top}}return{x:0,y:0}},t.exports.getParentOffset=function(e){if(e){var t=e.getBoundingClientRect(),n=null!=e.parentNode?e.parentNode.getBoundingClientRect():{top:0,left:0};return{x:t.left-n.left,y:t.top-n.top}}return{x:0,y:0}},t.exports.getSize=function(e){if(e){var t=e.getBoundingClientRect();return{width:t.right-t.left,height:t.bottom-t.top}}return{width:0,height:0}},t.exports.getStyle=function(e,t,n){var o=[];if(e&&t){var a,r;e.currentStyle?(a=e.currentStyle,r=function(e){return a[e]}):window&&window.getComputedStyle&&(a=window.getComputedStyle(e,null),r=function(e){return a.getPropertyValue(e)});for(var i=0;i<t.length;i++){var l=r(t[i]);o.push(l&&n!==!0?Math.ceil(parseFloat(l)):l)}}return o},t.exports.isVisible=function(e){return e?"none"!==e.style.display&&(0!==e.offsetWidth||0!==e.offsetHeight):!1},t.exports.updateTableColGroup=function(e,t){if(e){var n=e.firstChild;if(n&&"COLGROUP"===n.nodeName){e.style.tableLayout="auto",e.style.width="",n.innerHTML="";for(var o=0;o<t.length;o++){var a=document.createElement("col");a.style.width=t[o]+"px",n.appendChild(a)}e.style.tableLayout="fixed"}}}},{}]},{},[1])(1)});
//# sourceMappingURL=orb.min.js.map